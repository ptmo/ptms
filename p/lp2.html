<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Putramas Official | Wayang Nusantara Shadows Archive</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    

    <style>
        /* --- 1. PREMIUM DESIGN SYSTEM --- */
        :root {
            /* Palette */
            --primary: #7385a5;       /* Putramas Blue */
            --primary-dark: #5c6a84;
            --primary-soft: #e3e9f4;
            --gold: #c5a059;          /* Premium Gold Accent */
            --gold-light: #fdf6e3;
            
            /* Backgrounds */
            --bg-body: #f8faff;       /* Ultra Soft Blue-White */
            --surface: #f1f3f6;
            
            /* Typography */
            --text-main: #1e293b;
            --text-muted: #64748b;
            
            /* Glassmorphism */
            --glass: rgba(255, 255, 255, 0.7);
            --glass-border: 1px solid rgba(255, 255, 255, 0.8);
            --blur: blur(20px);
            
            /* Effects */
            --shadow-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 40px -5px rgba(115, 133, 165, 0.15);
            --radius-box: 24px;
            --radius-btn: 100px;
        }

        /* --- 2. RESET & BASE --- */
        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background: linear-gradient(135deg, #f6f9ff 0%, #c4d7e8 100%);
            color: var(--text-main); 
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- GLOBAL RESET: MATIKAN HIGHLIGHT BIRU BROWSER --- */
* {
    /* Ini kuncinya: Membuat warna tap jadi transparan */
    -webkit-tap-highlight-color: transparent !important;
    
    /* Opsional: Mematikan outline garis fokus default */
    outline: none !important; 
}

/* Khusus Gambar: Matikan fitur drag & menu klik kanan/tahan */
img {
    -webkit-user-drag: none;
    -webkit-touch-callout: none;
    user-select: none;
}

        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; }
        
        /* Smooth Scroll */
        html { scroll-behavior: smooth; }

        /* Container */
        .container {
            width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px;
        }
        
        /* Section Utils */
        section { padding: 100px 0; position: relative; overflow: hidden; }
        
        .section-header { text-align: center; max-width: 700px; margin: 0 auto 60px auto; }
        .badge {
            display: inline-block; padding: 8px 16px; border-radius: 50px;
            font-size: 0.75rem; font-weight: 700; letter-spacing: 1px; text-transform: uppercase;
            margin-bottom: 20px;
        }
        .badge-blue { background: var(--primary-soft); color: var(--primary); }
        .badge-gold { background: var(--gold-light); color: var(--gold); }

        h2 { background: linear-gradient(90deg, #7385a5, #a5739e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent; font-weight: bold; margin-bottom: 15px; letter-spacing: -1px; }
        p.subtitle { color: var(--text-muted); font-weight: bold; font-size: 1.1rem; }

        /* --- 3. NAVBAR (Compact & Fixed) --- */
#navbar {
    position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
    padding: 15px 0; /* Padding sedikit diperkecil agar compact */
    transition: all 0.4s ease;
}

#navbar.scrolled {
    background: rgba(255, 255, 255, 0.25); /* Lebih solid saat scroll */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255,255,255,0.5);
    padding: 10px 0;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
}

.nav-inner { 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
}

/* --- LOGO STYLE --- */
.logo { 
    font-size: 1.2rem; 
    font-weight: 800; 
    color: var(--primary); 
    display: flex; 
    align-items: center; 
    gap: 8px; 
    letter-spacing: -0.5px;
    text-decoration: none;
}

/* Ukuran Logo Gambar */
.logo-img {
    height: 40px; /* Ukuran proporsional navbar */
    width: auto;
    object-fit: contain;
}

/* --- NAV RIGHT (Menu + Tombol) --- */
.nav-right {
    display: flex;
    align-items: center;
    gap: 30px;
}

.nav-menu { display: flex; gap: 30px; }
.nav-menu a { 
    font-weight: 600; 
    color: var(--text-muted); 
    font-size: 0.9rem; 
    position: relative;
    text-decoration: none;
    transition: color 0.3s;
}
.nav-menu a:hover { color: var(--primary); }

/* --- TOMBOL MASUK (Baru) --- */
.btn-masuk {
    display: flex;
    align-items: center;
    gap: 6px;
    background: none; /* Warna Utama */
    color: var(--primary);
    padding: 6px 14px;
    border-radius: 20px; /* Bentuk Pill/Lonjong */
    border: 2px solid var(--primary);
    font-size: 0.85rem;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.btn-masuk:hover {
    background: var(--primary);
    color: #fff;
    birder: 2px solid #abb6c9;
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(0,0,0,0.2);
    filter: brightness(1.1);
}

.btn-masuk i { font-size: 0.8rem; }

.mlebet:hover,
.tandur:hover {
    background: var(--primary);
    color: #fff;
    transform: translateY(-2px);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.15);
}

/* ICON ANIM */
.mlebet i,
.tandur i {
    transition: transform 0.25s ease;
}

.mlebet:hover i,
.tandur:hover i {
    transform: translateX(2px);
}

/* --- CUSTOM LANGUAGE DROPDOWN --- */
.custom-dropdown {
    position: relative;
    display: inline-block;
    margin-right: 15px;
    font-family: 'Plus Jakarta Sans', sans-serif;
}

/* Tombol Utama (Yang terlihat) */
.dropdown-selected {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 14px;
    border-radius: 50px;
    border: 2px solid var(--primary);
    color: var(--primary);
    font-weight: 700;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.3s ease;
    background: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.dropdown-selected:hover {
    background: var(--primary);
    color: #fff;
    box-shadow: 0 5px 15px rgba(115, 133, 165, 0.3);
    transform: translateY(-2px);
}

/* Panah Kecil */
.dropdown-arrow {
    font-size: 0.7rem;
    transition: transform 0.3s ease;
}

/* Saat Dropdown Terbuka */
.custom-dropdown.active .dropdown-arrow {
    transform: rotate(180deg);
}

.custom-dropdown.active .dropdown-selected {
    background: var(--primary);
    color: #fff;
}

/* Daftar Pilihan (Hidden by default) */
.dropdown-options {
    position: absolute;
    top: 120%; /* Jarak dari tombol */
    left: 50%;
    transform: translateX(-50%) translateY(-10px);
    width: 160px;
    background: #fff;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    padding: 8px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    z-index: 100;
    border: 1px solid rgba(0,0,0,0.05);
}

/* Munculkan Daftar */
.custom-dropdown.active .dropdown-options {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(0);
}

/* Item Pilihan */
.dropdown-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.2s;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-main);
}

.dropdown-item:hover {
    background: var(--primary-soft);
    color: var(--primary);
}

/* Icon Bendera (SVG) */
/* UPDATE CSS INI (VERSI FINAL & KETAT) */
.flag-icon {
    /* 1. PAKSA Ukuran Fix Mutlak dengan !important */
    /* Ini akan mengalahkan aturan lain yang mencoba mengubah ukurannya */
    width: 16.5px !important;
    height: 16.5px !important;
    min-width: 16.5px !important;
    min-height: 16.5px !important;
    max-width: 16.5px !important;
    max-height: 16.5px !important;

    /* 2. Jaminan Aspek Rasio Persegi (Modern CSS) */
    aspect-ratio: 1 / 1;

    /* 3. Bentuk Lingkaran */
    border-radius: 50%;

    /* 4. Kunci perilaku Flexbox */
    flex-shrink: 0; /* Jangan mengecil */
    flex-grow: 0;   /* Jangan membesar */

    /* 5. Potong Konten yang Nakal */
    /* Ini krusial! Jika bounding box font terlalu besar, potong saja */
    overflow: hidden;

    /* 6. Memusatkan Konten (Huruf/SVG) */
    display: flex;
    align-items: center;
    justify-content: center;

    /* 7. Reset Font & Line-Height untuk presisi */
    /* Font size 10-12px pas untuk wadah 20px */
    font-size: 12px; 
    line-height: 1; /* Reset line-height agar tidak ada spasi vertikal aneh */
    text-align: center;
    
    /* 8. Reset Box Model & Spacing */
    box-sizing: border-box;
    margin: 0;
    padding: 0;

    /* 9. Style tambahan (tetap dipertahankan) */
    object-fit: cover;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
        
/* Responsif Mobile */
@media (max-width: 768px) {
    .dropdown-selected span {
        display: none; /* Sembunyikan teks nama bahasa di HP, sisa bendera */
    }
    .custom-dropdown { margin-right: 10px; }
}


/* --- RESPONSIVE MOBILE (MODE HP) --- */
@media (max-width: 768px) {
    /* 1. Sembunyikan Menu Teks agar tidak berantakan */
    .nav-menu {
        display: none; 
    }
    
    /* 2. Sesuaikan Font Logo di HP */
    .logo span {
        font-size: 1rem; /* Sedikit lebih kecil */
    }
    .logo-img {
        height: 32px; /* Logo gambar menyesuaikan */
    }

    /* 3. Tombol Masuk Versi HP (Kecil) */
    .btn-masuk {
        padding: 5px 12px;
        font-size: 0.75rem;
    }
    
    /* Pastikan jarak logo dan tombol pas */
    .nav-inner {
        padding-left: 15px;
        padding-right: 15px;
    }
}
        
        /* Button System */
        .btn {
            display: inline-flex; align-items: center; justify-content: center; gap: 10px;
            padding: 12px 32px; border-radius: var(--radius-btn);
            font-weight: 600; font-size: 1rem; cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            white-space: nowrap; border: none;
        }
        .btn-primary {
            background: var(--primary); color: #fff;
            box-shadow: 0 10px 20px rgba(115, 133, 165, 0.3);
        }
        .btn-primary:hover { transform: translateY(-3px); background: var(--primary-dark); }
        
        .btn-gold {
            background: var(--gold); color: #fff;
            box-shadow: 0 10px 20px rgba(197, 160, 89, 0.3);
        }
        .btn-gold:hover { transform: translateY(-3px); background: #b08d4b; }

        .btn-outline {
            background: transparent; border: 1.5px solid var(--primary); color: var(--primary);
        }
        .btn-outline:hover { background: var(--primary); color: #fff; transform: translateY(-3px); }

        /* --- 4. HERO SECTION (Immersive) --- */
        .hero {
            min-height: 100vh; display: flex; align-items: center;
            background: radial-gradient(circle at 10% 10%, rgba(115, 133, 165, 0.05), transparent 50%),
                        radial-gradient(circle at 90% 90%, rgba(197, 160, 89, 0.08), transparent 50%);
            padding-top: 80px; text-align: center;
        }
        .hero h1 {
            font-size: 4rem; line-height: 1.1; margin-bottom: 25px;
            background: linear-gradient(90deg, #7385a5, #a5739e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .hero p {
            font-size: 1.25rem; color: var(--text-muted); max-width: 800px; 
            margin: 0 auto 40px auto; font-weight: 400;
        }
        .hero-btns { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }

        /* --- 5. TECH STRIP (Credibility) --- */
        .tech-strip {
            background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%); border-top: 1px solid rgba(0,0,0,0.03); border-bottom: 1px solid rgba(0,0,0,0.03);
            padding: 30px 0;
        }
        .tech-grid {
            display: flex; justify-content: center; gap: 50px; flex-wrap: wrap;
        }
        .tech-item {
            display: flex; align-items: center; gap: 10px; 
            font-weight: bold; color: #7385a5; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;
            opacity: 0.7; transition: 0.3s;
        }
        .tech-item:hover { opacity: 1; color: #7385a5; }
        .tech-item i { color: #ffa200; }

        /* --- 6. ABOUT (Split Layout) --- */
        
        /* Container Utama */
.about-grid { 
    display: grid; 
    grid-template-columns: 1fr 1fr; 
    gap: 80px; 
    align-items: center; 
    perspective: 1500px; /* Memberikan kedalaman 3D */
}

/* 1. Wrapper Kartu */
.about-card-3d {
    background: transparent;
    width: 100%;
    height: 320px;
    cursor: pointer;
    
    /* Transisi untuk efek membesar (Scale) */
    transition: transform 0.1s ease; /* Typo 'ransition' sudah diperbaiki */
}

/* EFEK 1: SAAT DI-HOVER, KARTU MEMBESAR SEDIKIT (INSTAN) */
.about-card-3d:hover {
    transform: scale(1.02); 
}

/* 2. Bagian yang Berputar (Inner) */
.flip-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: left;
    
    /* Transisi Putar: Durasi 0.8s, Easing Bounce, DELAY 0.15s */
    transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.15s; 
    
    transform-style: preserve-3d;
}

/* EFEK 2: SAAT WRAPPER DI-HOVER, INNER BARU BERPUTAR (INI YANG TADI HILANG) */
.about-card-3d:hover .flip-inner {
    transform: rotateY(180deg);
}

/* Style Umum Depan & Belakang */
.flip-face {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    border-radius: var(--radius-box, 20px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    border: 1px solid rgba(255,255,255,0.6);
    overflow: hidden;
}

/* Tampilan Depan (Konten Teks) */
.flip-front {
    background: var(--surface, #fff); /* Fallback putih */
    background: linear-gradient(135deg, #ffffff 0%, #f3f6fa 100%);
    padding: 50px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* Dekorasi Sudut (Pengganti ::after lama) */
.corner-decor {
    position: absolute; bottom: 0; right: 0; width: 120px; height: 120px;
    background: linear-gradient(135deg, transparent 50%, rgba(197, 160, 89, 0.15) 100%);
    border-radius: 100% 0 0 0;
    pointer-events: none;
}

/* --- WADAH BELAKANG --- */
.flip-back {
    background: linear-gradient(135deg, #f6f9ff 0%, #c4d7e8 100%);
    transform: rotateY(180deg);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-end;
    position: relative; 
    padding: 0;
    overflow: hidden; 
    
    /* PENTING: Hilangkan blok biru saat diklik di Android/iOS */
    -webkit-tap-highlight-color: transparent; 
}

/* --- EFEK 1: HOVER SHINE (DIPERBAIKI) --- */
.flip-back::after {
    content: '';
    position: absolute;
    inset: 0;
    
    /* Gradient Kilau: Transparan -> Putih -> Transparan */
    background: linear-gradient(
        125deg,
        rgba(255, 255, 255, 0) 40%,    
        rgba(255, 255, 255, 0.5) 50%,  
        rgba(255, 255, 255, 0) 60%     
    );
    
    /* Ukuran Background diperbesar agar bisa "jalan" */
    background-size: 300% 300%;
    
    /* POSISI AWAL: Di luar area (Kanan Bawah) */
    background-position: 150% 150%; 
    
    /* Filter agar warna di bawahnya lebih "Pop" saat kilau lewat */
    backdrop-filter: saturate(150%);
    -webkit-backdrop-filter: saturate(150%);
    
    opacity: 0;
    transition: all 0.6s ease; /* Durasi kilau lewat */
    
    z-index: 15;
    pointer-events: none;
}

/* --- TRIGGER ANIMASI (HOVER & ACTIVE/KLIK) --- */
/* Gunakan :active agar di HP efeknya muncul saat jari menempel */
.about-card-3d:hover .flip-back::after,
.about-card-3d:active .flip-back::after {
    opacity: 1;
    visibility: visible;
    
    /* POSISI AKHIR: Geser ke Kiri Atas (Efek Swipe) */
    background-position: 0% 0%; 
}

/* --- EFEK 2: KLIK SUPERNOVA (CYBERPUNK EDITION) --- */
.supernova-burst {
    position: absolute;
    top: 50%; 
    left: 50%;
    width: 20px; 
    height: 20px;
    border-radius: 50%;
    
    /* GRADIENT BARU: Cyberpunk Pastel (No White, No Yellow) */
    /* Urutan: Inti (Biru Es) -> Biru Muda -> Ungu Muda -> Pink Muda -> Transparan */
    background: radial-gradient(
        circle, 
        #e0f7fa 0%,      /* 0-10%: Inti Terang (Ice Blue - Pengganti Putih) */
        #4fc3f7 30%,     /* 30%: Biru Muda Cyber */
        #e040fb 55%,     /* 55%: Ungu Muda Neon */
        #ff80ab 75%,     /* 75%: Pink Muda */
        transparent 90%  /* 90%: Hilang */
    );  
      
    transform: translate(-50%, -50%) scale(0);  
    animation: supernovaAnim 0.6s cubic-bezier(0, 0.9, 0.57, 1) forwards;
    
    /* Z-INDEX SANGAT PENTING: Harus lebih tinggi dari link overlay (z-20) */
    z-index: 30; 
    
    pointer-events: none; 
    
    /* Mix Blend Mode: Screen membuat warna-warna ini "berpendar" saat bertemu background gelap/terang */
    mix-blend-mode: screen; 
    
    /* Opsional: Tambah sedikit blur agar ledakan terasa lebih 'gas' atau asap */
    filter: blur(1px);
}

@keyframes supernovaAnim {
    0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(35); opacity: 0; } /* Scale sedikit dibesarkan ke 35 agar warna pink di ujung terlihat */
}

/* --- GAMBAR (Full & Centered) --- */
.wayang-bg {
    width: 100%;
    height: 100%; /* Mengisi penuh kartu */
    object-fit: contain; /* Gambar utuh presisi */
    position: absolute;
    top: -20px; /* Sedikit naik agar tidak tertutup teks */
    left: 0;
    transition: transform 6s ease;
    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
}

/* --- METADATA CONTAINER (Compact Glass) --- */
.meta-glass {
    position: relative;
    width: 90%;
    margin-bottom: 15px; /* Jarak dari bawah dikurangi */
    padding: 12px 15px; /* Padding lebih kecil agar hemat ruang */
    
    background: rgba(255, 255, 255, 0.35); /* Sedikit lebih solid agar teks kecil terbaca */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.9);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    
    display: flex;
    flex-direction: column;
    z-index: 10;
}

/* --- PEMBUNGKUS BARIS ATAS (Header) --- */
.meta-header {
    display: flex;
    justify-content: space-between; /* Kunci: Dorong Kiri & Kanan */
    align-items: center; /* Sejajar vertikal */
    margin-bottom: 4px;
    width: 100%;
}

/* --- JUDUL NAMA (Pojok Kiri Atas) --- */
.meta-title {
    font-size: 1rem;
    font-weight: 800; /* Sedikit ditebalkan agar jelas */
    color: #2c3e50;
    margin: 0;
    letter-spacing: -0.5px;
    line-height: 1.1;
    text-align: left; /* Paksa rata kiri */
    
    /* Supaya kalau nama panjang tidak nabrak badge */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 75%; 
}

/* --- BADGE ID (Pojok Kanan Atas) --- */
.meta-badge {
    background: linear-gradient(135deg, #2c3e50, #4ca1af);
    color: #fff;
    font-size: 0.6rem; /* Naik dikit biar terbaca */
    font-weight: 700;
    padding: 3px 8px;
    border-radius: 6px; /* Radius kotak sedikit, lebih modern */
    box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    letter-spacing: 0.5px;
    flex-shrink: 0; /* Jangan menyusut */
}

/* --- SUBTITLE (Rata Kiri) --- */
.meta-subtitle {
    font-size: 0.7rem;
    color: #546e7a;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    text-align: left; /* Rata kiri mengikuti judul */
    margin-bottom: 8px;
}

/* --- FOOTER (Garis Atas) --- */
.meta-footer {
    font-size: 0.5rem;
    color: #90a4ae;
    font-weight: 600;
    text-align: right; /* Footer di kanan atau kiri? (Saya set kanan agar rapi) */
    border-top: 1px solid rgba(0,0,0,0.05);
    padding-top: 6px;
}

/* Responsif HP */
@media (max-width: 768px) {
    .about-grid { grid-template-columns: 1fr; gap: 30px; }
    .about-card-3d { height: 280px; }
    .flip-front { padding: 30px; }
}

        /* --- 7. FEATURES (Bento Grid Style) --- */
        .bento-grid {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px;
            grid-template-rows: auto auto;
        }
        .bento-card {
            background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%); padding: 35px; border-radius: var(--radius-box);
            box-shadow: var(--shadow-sm); border: 1px solid rgba(0,0,0,0.02);
            transition: 0.4s; position: relative; overflow: hidden;
            display: block !important;
        }
        .bento-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
        
        .bento-card h3 { margin: 20px 0 10px 0; font-size: 1.25rem; color: var(--text-main); }
        .bento-card ul li {
            margin-bottom: 8px; font-size: 0.9rem; color: var(--text-muted);
            display: flex; align-items: center; gap: 10px;
        }
        .bento-card ul li i { font-size: 6px; color: var(--gold); }

        /* --- GLOBAL ICON BOX FIX (ANTI GEPENG) --- */
.icon-box {
    width: 50px;
    height: 50px;
    flex: 0 0 50px;

    display: flex;
    align-items: center;
    justify-content: center;

    border-radius: 15px;
}

/* üî• FIX FONT AWESOME GLYPH */
.icon-box i {
    display: flex;              /* ‚¨ÖÔ∏è WAJIB */
    align-items: center;        /* ‚¨ÖÔ∏è WAJIB */
    justify-content: center;    /* ‚¨ÖÔ∏è WAJIB */

    width: 100%;
    height: 100%;

    font-size: 22px;
    line-height: 1;             /* ‚¨ÖÔ∏è HENTIKAN BASELINE */
}

.ib-blue {
    background: #e6ebf1 !important; /* Background Abu Gembok */
    color: #475569 !important;      /* Icon Gelap */
}
        
/* Class untuk ARSIP, DUKUNGAN (Emas) */
.ib-gold {
    background: #e6ebf1 !important; /* Background DIPAKSA SAMA dengan Gembok */
    color: #d97706 !important;      /* Icon tetap Emas */
}
        
        /* Grid Spans */
        .span-2 { grid-column: span 2; }
        
        /* --- 8. CATEGORIES & SECURITY --- */
        .categories-wrapper { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
        .cat-tag {
            background: var(--surface); border: 1px solid rgba(0,0,0,0.05);
            padding: 10px 25px; border-radius: 50px; font-weight: 600; color: var(--text-muted);
            cursor: default; transition: 0.3s;
        }
        .cat-tag:hover { border-color: var(--primary); color: var(--primary); background: #fff; transform: translateY(-2px); }

        .security-box {
    background: linear-gradient(135deg, #c4d7e8 0%, #f6f9ff 100%);
    border: 2px solid #7385a5;
    border-radius: 20px !important;
    padding: 24px; 
    text-align: center;
    color: #73a57a;
    margin-top: 50px;
    width: 100%;
    box-sizing: border-box;
    box-shadow:
    0 8px 20px rgba(0, 0, 0, 0.08),
    0 25px 60px rgba(0, 0, 0, 0.06);
    transition: box-shadow 0.3s ease, transform 0.3s ease;
        }
        
        .security-box h2 { color: #515d73; }
        .security-box p { color: #515d73; }
        .sec-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 40px; }
        .sec-item i { font-size: 2rem; color: #7385a5; margin-bottom: 15px; }
        .sec-item h4 { font-size: 1.1rem; margin-bottom: 5px; }
        .sec-item p { font-size: 0.9rem; color: #515d73; }

        .audience-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
        .audience-card { background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%); border: 2px solid var(--primary); border-radius: var(--radius-box); box-shadow:
    0 8px 20px rgba(0, 0, 0, 0.08),
    0 25px 60px rgba(0, 0, 0, 0.06);
    transition: box-shadow 0.3s ease, transform 0.3s ease;
                        
   text-align: center; padding: 30px; }

        /* --- 10. FOOTER --- */
        footer { background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%);; padding: 80px 0 30px 0; border-top: 1px solid rgba(0,0,0,0.05); }
        .footer-content { text-align: center; }
        .footer-logo { font-size: 1.5rem; font-weight: 800; color: var(--primary); letter-spacing: -1px; }
        .footer-tagline { color: var(--text-muted); margin-top: 10px; font-size: 0.9rem; font-weight: bold; }
        .socials { margin-top: 30px; display: flex; justify-content: center; gap: 20px; }
        .social-btn {
            width: 45px; height: 45px; border-radius: 50%; background: var(--bg-body);
            display: flex; align-items: center; justify-content: center; color: var(--text-muted);
            transition: 0.3s;
        }
        .social-btn:hover { background: var(--primary); color: #fff; transform: translateY(-3px); }
        .copyright { margin-top: 50px; font-size: 0.8rem; color: #515d73; }

        /* --- RESPONSIVE MOBILE --- */
        @media (max-width: 900px) {
            .hero h1 { font-size: 2.8rem; }
            .nav-menu { display: none; }
            .about-grid, .bento-grid, .sec-grid, .audience-grid { grid-template-columns: 1fr; }
            .span-2 { grid-column: span 1; }
            .tech-grid { flex-direction: column; gap: 20px; }
            .container { padding: 0 25px; }
            
            /* Mobile Btn Fix */
            .btn { padding: 8px 20px; font-size: 0.85rem; }
            #btn-connect {
                padding: 6px 16px !important;
                font-size: 0.75rem !important;
                gap: 6px; border-width: 1.5px;
            }
        }

            /* --- TAMBAHAN CSS UNTUK ACTIVITY FEED --- */
    
    /* 1. Kustomisasi Scrollbar (Agar tipis & elegan) */
    #activity-feed::-webkit-scrollbar {
        width: 6px;
    }
    #activity-feed::-webkit-scrollbar-track {
        background: #f1f5f9; 
        border-radius: 4px;
    }
    #activity-feed::-webkit-scrollbar-thumb {
        background: #cbd5e1; 
        border-radius: 4px;
    }
    #activity-feed::-webkit-scrollbar-thumb:hover {
        background: var(--primary); 
    }

    /* 2. Efek Hover pada List Activity */
    #activity-feed li {
        transition: background-color 0.2s ease;
        border-radius: 8px;
        padding: 10px !important; /* Timpa padding inline agar rapi */
        margin-bottom: 5px;
        border-bottom: none !important; /* Hapus garis pemisah kaku */
    }
    #activity-feed li:hover {
        background-color: #f8fafc;
        transform: translateX(5px); /* Efek geser dikit saat di-hover */
        transition: 0.3s;
    }

    /* Container Loader */
.custom-loader {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 5; /* Di bawah metadata, tapi di atas background */
    
    /* Styling Icon */
    font-size: 1rem; /* Ukuran Besar */
    color: #7385a5;  /* Warna Abu-abu Elegan */
    filter: drop-shadow(0 2px 5px rgba(0,0,0,0.1));
    
    /* Animasi Transisi */
    transition: opacity 0.3s ease;
    opacity: 0; /* Default sembunyi */
    pointer-events: none;
}

/* Class helper untuk menampilkan loader */
.custom-loader.active {
    opacity: 1;
}



/* --- RESPONSIVE MOBILE (PENTING) --- */
@media (max-width: 768px) {
    .bento-grid {
        /* Di HP jadi 1 kolom ke bawah */
        grid-template-columns: 1fr; 
    }
    
    .bento-card.span-2 {
        /* Di HP span-2 dimatikan, jadi full width biasa */
        grid-column: span 1; 
    }
}


    </style>

    <style>
        .header { text-align: center; margin-bottom: 50px; }
        .header h1 { font-size: 2.5rem; font-weight: 800; color: var(--primary); margin: 0 0 10px 0; letter-spacing: -1px; }
        .header p { color: var(--text-muted); font-size: 1.1rem; }
        .status-badge { display: inline-block; background: #e0f2f1; color: #00695c; padding: 5px 15px; border-radius: 50px; font-size: 0.8rem; font-weight: 700; margin-top: 15px; }

        /* Grid System */
        .grid-4 { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }

        @media(max-width: 800px) { .grid-2 { grid-template-columns: 1fr; } }

        /* Cards */
        .card { background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%);; border-radius: var(--radius-box); padding: 30px; box-shadow: var(--shadow); border: 1px solid rgba(0,0,0,0.03); transition: 0.3s; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px -10px rgba(115, 133, 165, 0.2); }
        
        /* Stats */
        .stat-label { font-size: 0.8rem; font-weight: 700; color: var(--text-muted); letter-spacing: 1px; margin-bottom: 5px; }
        .stat-value { font-size: 1.8rem; font-weight: 800; color: #00b318; }
        .stat-icon { float: right; font-size: 2rem; opacity: 0.1; color: #ccffd3; margin-top: -30px; }

        /* Charts */
        .chart-box { background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%);; border-radius: var(--radius-box); height: 250px; position: relative; width: 100%; }
        .card-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 20px; color: var(--primary-dark); }

        /* Loading Animation */
        .skeleton { background: #e2e8f0; color: transparent !important; border-radius: 6px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }
   
    /* Progress Bar Tambahan */
        #progress-bar { position: fixed; top: 0; left: 0; width: 0; height: 2px; 

                /* --- TAMBAHAN CSS UNTUK ACTIVITY FEED --- */
    
    /* 1. Kustomisasi Scrollbar (Agar tipis & elegan) */
    #activity-feed::-webkit-scrollbar {
        width: 6px;
    }
    #activity-feed::-webkit-scrollbar-track {
        background: #f1f5f9; 
        border-radius: 4px;
    }
    #activity-feed::-webkit-scrollbar-thumb {
        background: #cbd5e1; 
        border-radius: 4px;
    }
    #activity-feed::-webkit-scrollbar-thumb:hover {
        background: var(--primary); 
    }

    /* 2. Efek Hover pada List Activity */
    #activity-feed li {
        transition: background-color 0.2s ease;
        border-radius: 8px;
        padding: 10px !important; /* Timpa padding inline agar rapi */
        margin-bottom: 5px;
        border-bottom: none !important; /* Hapus garis pemisah kaku */
    }
    #activity-feed li:hover {
        background-color: #f8fafc;
        transform: translateX(5px); /* Efek geser dikit saat di-hover */
        transition: 0.3s;
    }

                       /* Wrapper Gambar Kecil */
    .thumb-wrapper {
        width: 45px !important;       /* Paksa lebar */
        height: 45px !important;      /* Paksa tinggi */
        flex-shrink: 0;               /* Jangan sampai gepeng */
        border-radius: 8px; 
        overflow: hidden;             /* Potong gambar yg kelebihan */
        border: 1px solid #eee;
        background: #f9f9f9;
        margin-right: 0;              /* Reset margin */
    }

    /* Gambar di dalamnya */
    .wayang-thumb {
        width: 100% !important;       /* Ikut lebar wrapper (45px) */
        height: 100% !important;      /* Ikut tinggi wrapper (45px) */
        object-fit: cover;            /* Isi penuh kotak (crop rapi) */
        display: block;
    }

    /* Item List Container */
    .popular-item {
        display: flex; 
        align-items: center; 
        padding: 10px; 
        background: #fff; 
        border: 1px solid #f0f0f0; 
        border-radius: 12px; 
        transition: 0.2s;
        gap: 10px;                    /* Jarak antar elemen */
    }

    .popular-item:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        border-color: var(--primary);
    }

    
    </style>
</head>
<body>

    <nav id="navbar">
        <div class="container nav-inner">
            <a href="index" class="logo">
                <img src="img/pwn-logo.png" class="logo-img">
                <span>Wayang Nusantara</span>
            </a>

            <div class="nav-right">
                <div class="nav-menu">
                    <a href="#about" data-i18n="nav_about">Tentang</a>
                    <a href="#features" data-i18n="nav_features">Fitur</a>
                    <a href="#category" data-i18n="nav_archive">Arsip</a>
                    <a href="#vision" data-i18n="nav_vision">Visi</a>
                </div>

                <div class="custom-dropdown" id="custom-lang-dropdown">
    
    <div class="dropdown-selected" onclick="toggleDropdown()">
        <img id="current-flag" src="" class="flag-icon">
        <span id="current-lang-text">ID</span>
        <i class="fas fa-chevron-down dropdown-arrow"></i>
    </div>

    <div class="dropdown-options">
        
        <div class="dropdown-item" onclick="selectLang('id')">
            <svg class="flag-icon" viewBox="0 0 640 480">
                <path fill="#e11837" d="M0 0h640v240H0z"/>
                <path fill="#fefefe" d="M0 240h640v240H0z"/>
            </svg>
            Indonesian
        </div>

        <div class="dropdown-item" onclick="selectLang('jv')">
            <div style="width:20px; height:20px; background:#8d6e63; color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:10px;">Í¶ó</div>
            Jawa
        </div>

        <div class="dropdown-item" onclick="selectLang('su')">
            <div style="width:20px; height:20px; background:#00897b; color:#fff; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:10px;">·Æû</div>
            Sunda
        </div>

        <div class="dropdown-item" onclick="selectLang('en')">
            <svg class="flag-icon" viewBox="0 0 640 480">
                <path fill="#012169" d="M0 0h640v480H0z"/>
                <path fill="#FFF" d="M75 0l244 181L562 0h78v62L400 241l240 178v61h-80L320 301 81 480H0v-60l239-178L0 64V0h75z"/>
                <path fill="#C8102E" d="M424 294l216 166v20h-59L345 297v183h-52V294L54 480H0v-23l240-196H0v-46h236L0 23V0h54l238 186V0h52v189L585 0h55v22L424 207h216v45H424v42z"/>
            </svg>
            English
        </div>

    </div>
</div>

                <a href="beranda" class="btn-masuk">
                    <i class="fas fa-sign-in-alt"></i> <span data-i18n="btn_login">Masuk</span>
                </a>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="container" data-aos="fade-up" data-aos-duration="1000">
            <h1>Wayang Nusantara</h1><br>
            <h2 data-i18n="hero_subtitle">Shadows Archive</h2>
            <p style="font-weight: bold;" data-i18n="hero_desc">
                Arsip digital wayang berbasis blockchain yang Immutable, terverifikasi, terbuka, dan transparan.
            </p>
            
            <div class="hero-btns">
                <a href="galeri" target="_blank" class="btn btn-primary">
                    <i class="fas fa-fire"></i> <span data-i18n="btn_view_archive">Lihat Arsip Wayang</span>
                </a>
                <a href="upload_public" target="_blank" class="btn btn-outline">
                    <i class="fas fa-cloud-upload-alt"></i> <span data-i18n="btn_upload_public">Upload Publik</span>
                </a>
            </div>
        </div>
    </section>

    <div class="tech-strip">
        <div class="container tech-grid">
            <div class="tech-item"><i class="fas fa-cube"></i> <span data-i18n="tech_erc">ERC-721 Compatible</span></div>
            <div class="tech-item"><i class="fas fa-link"></i> <span data-i18n="tech_meta">On-Chain Metadata</span></div>
            <div class="tech-item"><i class="fas fa-shield-alt"></i> <span data-i18n="tech_imm">Immutable Records</span></div>
            <div class="tech-item"><i class="fas fa-coins"></i> <span data-i18n="tech_p2p">P2P Economy</span></div>
        </div>
    </div>

    <section id="about" style="padding-top: 15px;">
        <div class="container about-grid">
            
            <div class="about-card-3d" data-aos="fade-right">
                <div class="flip-inner">
                    <div class="flip-face flip-front">
                        <i class="fas fa-scroll" style="font-size: 2rem; color: var(--primary); margin-bottom: 25px;"></i>
                        <h3 style="font-size: 1.5rem; color: var(--text-main);" data-i18n="card_preservation_title">Preservasi Digital</h3>
                        <p style="font-size: 12px; font-weight: bold; color: #666;" data-i18n="card_preservation_desc">
                            Teknologi Blockchain memastikan setiap data budaya tercatat permanen tanpa risiko manipulasi.
                        </p>
                        <div class="corner-decor"></div>
                    </div>
                    <div class="flip-face flip-back">
                        <a id="link-wayang-1" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                        <img id="random-wayang-1" class="wayang-bg" src="" alt="Wayang Art">
                        <div id="loader-wayang-1" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                        <div class="meta-glass">
                            <div class="meta-header"><h4 id="name-wayang-1" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-1">00</span></div></div>
                            <div class="meta-subtitle"><span id="gol-wayang-1">-</span> ‚Ä¢ <span id="gaya-wayang-1">-</span></div>
                            <div class="meta-footer">Powered By Putramas Official</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="about-card-3d" data-aos="fade-left">
                <div class="flip-inner">
                    <div class="flip-face flip-front">
                        <i class="fas fa-landmark" style="font-size: 2rem; color: var(--primary); margin-bottom: 25px;"></i>
                        <h3 style="font-size: 1.5rem; color: var(--text-main);" data-i18n="card_gallery_title">Arsip Digital Galeri</h3>
                        <p style="font-size: 12px; font-weight: bold; color: #666;" data-i18n="card_gallery_desc">
                            Platform arsip digital galeri, yang tersimpan Immutable dan terverifikasi lintas generasi.
                        </p>
                        <div class="corner-decor"></div>
                    </div>
                    <div class="flip-face flip-back">
                        <a id="link-wayang-2" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                        <img id="random-wayang-2" class="wayang-bg" src="" alt="Wayang Art">
                        <div id="loader-wayang-2" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                        <div class="meta-glass">
                            <div class="meta-header"><h4 id="name-wayang-2" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-2">00</span></div></div>
                            <div class="meta-subtitle"><span id="gol-wayang-2">-</span> ‚Ä¢ <span id="gaya-wayang-2">-</span></div>
                            <div class="meta-footer">Powered By Putramas Official</div>
                        </div>
                    </div>
                </div>
            </div>       
        </div>
    </section>

    <section id="features" style="padding-top: 50px; padding-bottom: 50px;">
    <div class="container">
        
        <div class="section-header" data-aos="fade-up">
           <h2 style="font-size: 2rem; font-weight: 800; margin-bottom: 30px;" data-i18n="feature_title">
               Fitur Ekosistem
           </h2>
           <p class="subtitle" data-i18n="feature_subtitle">
               Kombinasi seni tradisional dengan transparansi Web3.
           </p>
        </div>

        <div class="bento-grid">
            
            <div class="bento-card span-2" data-aos="fade-up" data-aos-delay="100" style="padding: 0; overflow: visible;">
                <div class="about-card-3d" style="width: 100%; height: 100%; min-height: 280px;">
                    <div class="flip-inner">
                        <div class="flip-face flip-front" style="padding: 30px; display: flex; flex-direction: column; justify-content: flex-start; height: 100%;">
                            <div class="icon-box ib-gold"><i class="fas fa-certificate"></i></div>
                            <h3 data-i18n="feat_official_title">Arsip Resmi (Official)</h3>
                            <p style="margin-bottom: 15px; font-size: 12px; font-weight: bold; color: var(--text-muted);" data-i18n="feat_official_desc">
                                Wayang yang diarsipkan langsung koleksi milik Official dengan metadata lengkap.
                            </p>
                            <ul>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="verif_onchain">Verifikasi On-Chain</strong></li>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="meta_visual">Metadata Visual & Gaya</strong></li>
                            </ul>
                        </div>
                        <div class="flip-face flip-back">
                            <a id="link-wayang-3" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                            <img id="random-wayang-3" class="wayang-bg" src="" alt="Wayang Art">
                            <div id="loader-wayang-3" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                            <div class="meta-glass">
                                <div class="meta-header"><h4 id="name-wayang-3" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-3">00</span></div></div>
                                <div class="meta-subtitle"><span id="gol-wayang-3">-</span> ‚Ä¢ <span id="gaya-wayang-3">-</span></div>
                                <div class="meta-footer">Powered By Putramas Official</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bento-card span-2" data-aos="fade-up" data-aos-delay="200" style="padding: 0; overflow: visible;">
                <div class="about-card-3d" style="width: 100%; height: 100%; min-height: 280px;">
                    <div class="flip-inner">
                        <div class="flip-face flip-front" style="padding: 30px; display: flex; flex-direction: column; justify-content: flex-start; height: 100%;">
                            <div class="icon-box ib-blue"><i class="fas fa-users"></i></div>
                            <h3 data-i18n="feat_community_title">Upload Komunitas</h3>
                            <p style="margin-bottom: 15px; font-size: 12px; font-weight: bold; color: var(--text-muted);" data-i18n="feat_community_desc">
                                Platform terbuka bagi kolektor & publik untuk mendokumentasikan karya mereka.
                            </p>
                            <ul>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="creator_right">Hak Cipta Kreator</strong></li>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="transparent_id">Identitas Transparan</strong></li>
                            </ul>
                        </div>
                        <div class="flip-face flip-back">
                            <a id="link-wayang-4" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                            <img id="random-wayang-4" class="wayang-bg" src="" alt="Wayang Art">
                            <div id="loader-wayang-4" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                            <div class="meta-glass">
                                <div class="meta-header"><h4 id="name-wayang-4" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-4">00</span></div></div>
                                <div class="meta-subtitle"><span id="gol-wayang-4">-</span> ‚Ä¢ <span id="gaya-wayang-4">-</span></div>
                                <div class="meta-footer">Powered By Putramas Official</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bento-card" data-aos="fade-up" data-aos-delay="300" style="padding: 0; overflow: visible;">
                <div class="about-card-3d" style="width: 100%; height: 100%; min-height: 280px;">
                    <div class="flip-inner">
                        <div class="flip-face flip-front" style="padding: 25px; display: flex; flex-direction: column; justify-content: flex-start; height: 100%;">
                            <div class="icon-box ib-blue"><i class="fas fa-star"></i></div>
                            <h3 data-i18n="feat_reputation_title">Reputasi Sosial</h3>
                            <ul>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="imm_review">Immutable Review</strong></li>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="rating_star">Rating 1-5 Bintang</strong></li>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="anti_bot">Anti-Bot System</strong></li>
                            </ul>
                        </div>
                        <div class="flip-face flip-back">
                            <a id="link-wayang-5" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                            <img id="random-wayang-5" class="wayang-bg" src="" alt="Wayang Art">
                            <div id="loader-wayang-5" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                            <div class="meta-glass">
                                <div class="meta-header"><h4 id="name-wayang-5" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-5">00</span></div></div>
                                <div class="meta-subtitle"><span id="gol-wayang-5">-</span> ‚Ä¢ <span id="gaya-wayang-5">-</span></div>
                                <div class="meta-footer">Powered By Putramas Official</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bento-card span-2" data-aos="fade-up" data-aos-delay="400" style="padding: 0; overflow: visible;">
                <div class="about-card-3d" style="width: 100%; height: 100%; min-height: 280px;">
                    <div class="flip-inner">
                        <div class="flip-face flip-front" style="padding: 30px; display: flex; flex-direction: column; justify-content: flex-start; height: 100%; background: linear-gradient(135deg, #fff 0%, #fffbf0 100%); border: 1px solid rgba(197, 160, 89, 0.2); border-radius: 20px;">
                            <div class="icon-box ib-gold"><i class="fas fa-heart"></i></div>
                            <h3 style="color: var(--gold);" data-i18n="feat_support_title">Dukungan Langsung</h3>
                            <p style="margin-bottom: 10px; font-size: 12px; font-weight: bold; color: var(--text-muted);" data-i18n="feat_support_desc">
                                Kirim dukungan ETH secara langsung ke Karya atau koleksi, dengan kurasi terbaik.
                            </p>
                            <ul>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="no_cut">Tanpa Potongan Platform</strong></li>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="p2p_instant">Transaksi P2P Instan</strong></li>
                            </ul>
                        </div>
                        <div class="flip-face flip-back">
                            <a id="link-wayang-6" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                            <img id="random-wayang-6" class="wayang-bg" src="" alt="Wayang Art">
                            <div id="loader-wayang-6" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                            <div class="meta-glass">
                                <div class="meta-header"><h4 id="name-wayang-6" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-6">00</span></div></div>
                                <div class="meta-subtitle"><span id="gol-wayang-6">-</span> ‚Ä¢ <span id="gaya-wayang-6">-</span></div>
                                <div class="meta-footer">Powered By Putramas Official</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bento-card" data-aos="fade-up" data-aos-delay="500" style="padding: 0; overflow: visible;">
                <div class="about-card-3d" style="width: 100%; height: 100%; min-height: 280px;">
                    <div class="flip-inner">
                        <div class="flip-face flip-front" style="padding: 25px; display: flex; flex-direction: column; justify-content: flex-start; height: 100%;">
                            <div class="icon-box ib-blue"><i class="fas fa-lock"></i></div>
                            <h3 data-i18n="feat_secure_title">Aman & Abadi</h3>
                            <ul>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="dist_archive">Arsip Terdistribusi</strong></li>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="crypto_data">Data Kriptografis</strong></li>
                                <li><i class="fas fa-circle"></i> <strong data-i18n="integrity">Keaslian Integritas</strong></li>
                            </ul>
                        </div>
                        <div class="flip-face flip-back">
                            <a id="link-wayang-7" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                            <img id="random-wayang-7" class="wayang-bg" src="" alt="Wayang Art">
                            <div id="loader-wayang-7" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                            <div class="meta-glass">
                                <div class="meta-header"><h4 id="name-wayang-7" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-7">00</span></div></div>
                                <div class="meta-subtitle"><span id="gol-wayang-7">-</span> ‚Ä¢ <span id="gaya-wayang-7">-</span></div>
                                <div class="meta-footer">Powered By Putramas Official</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div> 
    </div>
</section>

    <section id="category" style="padding-top: 5px;">
        <div id="progress-bar"></div>
        <div class="container">
            <div class="header" data-aos="fade-down">
                <h2 style="font-size: 2rem; font-weight: 800; margin-bottom: 30px;" data-i18n="public_data_title">
                    Data Publik Wayang Nusantara
                </h2>
                <div class="status-badge"><i class="fas fa-circle" style="font-size:8px; margin-right:5px;"></i> LIVE DATA</div>
            </div>

            <div class="grid-4" data-aos="fade-up">
                <div class="card">
                    <div class="stat-label" data-i18n="stat_total">Total Wayang</div>
                    <div class="stat-value skeleton" id="val-supply">0</div>
                    <div class="stat-icon"><i class="fas fa-scroll"></i></div>
                </div>
                <div class="card">
                    <div class="stat-label" data-i18n="stat_fee">Biaya Minting</div>
                    <div class="stat-value skeleton" id="val-fee">0</div>
                    <div class="stat-icon"><i class="fas fa-tag"></i></div>
                </div>
                <div class="card">
                    <div class="stat-label" data-i18n="stat_tips">Total Dukungan</div>
                    <div class="stat-value skeleton" id="val-tips">0</div>
                    <div class="stat-icon"><i class="fab fa-ethereum"></i></div>
                </div>
                <div class="card">
                    <div class="stat-label" data-i18n="stat_ratio">Rasio Official</div>
                    <div class="stat-value skeleton" id="val-ratio">0%</div>
                    <div class="stat-icon"><i class="fas fa-check-circle"></i></div>
                </div>
            </div>

            <div class="grid-2" data-aos="fade-up" data-aos-delay="100">
                <div class="card">
                    <div class="card-title" data-i18n="chart_gol">Dominasi Golongan</div>
                    <div class="chart-box"><canvas id="chartGolongan"></canvas></div>
                </div>
                <div class="card">
                    <div class="card-title" data-i18n="chart_style">Dominasi Gagrak</div>
                    <div class="chart-box"><canvas id="chartGaya"></canvas></div>
                </div>
            </div>
        </div>
    </section>

    <section id="activity" style="padding-top: 5px;">
        <div class="container">
            <div class="grid-2" data-aos="fade-up" data-aos-delay="200">
                <div class="card" style="height: 450px; overflow: hidden; display: flex; flex-direction: column;">
                    <div class="card-title">
                        <i class="fa-solid fa-circle" style="color: #00b318; margin-right: 8px;"></i>
                        <span data-i18n="activity_global">Aktivitas Global</span>
                    </div>
                    <div style="flex: 1; overflow-y: auto; padding-right: 5px;" id="activity-feed">
                        <div style="text-align:center; padding: 20px; color: #ccc;">
                            <i class="fas fa-circle-notch fa-spin"></i> <span data-i18n="loading_data">Memuat data...</span>
                        </div>
                    </div>
                </div>

                <div class="card" style="height: 450px; display: flex; flex-direction: column;">
                    <div class="card-title">
                        <i class="fas fa-crown" style="color: #7385a5; margin-right: 8px;"></i>
                        <span data-i18n="activity_popular">Paling Populer (Top Likes)</span>
                    </div>
                    
                    <div style="background: #fff8e1; padding: 10px 15px; border-radius: 12px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #ffe0b2;">
                        <span style="font-size: 0.85rem; color: #f57c00; font-weight: 600;" data-i18n="total_likes_label">Total Suka Dari Komunitas</span>
                        <span id="val-total-likes" style="font-size: 1rem; font-weight: 800; color: #00b318;">0</span>
                    </div>

                    <div id="top-wayang-list" style="flex: 1; overflow-y: auto; padding-right: 5px;">
                        <div style="text-align:center; padding: 40px 0; color: #ccc;">
                            <i class="fas fa-circle-notch fa-spin"></i> <span data-i18n="loading_data">Memuat...</span>
                        </div>
                    </div>
                </div>
            </div>       
        </div>
    </section>

    <section style="padding-top: 5px;">
        <div class="container">
            <div class="security-box" data-aos="zoom-in">
                <h2 data-i18n="sec_title">Data Tidak Bisa Dipalsukan</h2>
                <p style="font-weight: bold; font-size: 12px;" data-i18n="sec_desc">Wayang Nusantara adalah platform arsip digital galeri terdesentralisasi pertama di Indonesia.</p>
                
                <div class="sec-grid">
                    <div class="sec-item">
                        <i class="fas fa-fingerprint"></i>
                        <h4 data-i18n="sec_auth">Autentik</h4>
                        <p style="font-weight: bold; font-size: 12px;" data-i18n="sec_auth_desc">Tanda tangan digital kreator.</p>
                    </div>
                    <div class="sec-item">
                        <i class="fas fa-database"></i>
                        <h4 data-i18n="sec_decent">Terdesentralisasi</h4>
                        <p style="font-weight: bold; font-size: 12px;" data-i18n="sec_decent_desc">Tidak ada server pusat tunggal.</p>
                    </div>
                    <div class="sec-item">
                        <i class="fas fa-clock"></i>
                        <h4 data-i18n="sec_time">Timestamp</h4>
                        <p style="font-weight: bold; font-size: 12px;" data-i18n="sec_time_desc">Bukti waktu upload akurat.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="vision" style="padding-top: 5px;">
        <div class="container">
            <div style="max-width: 600px; margin: 0 auto 60px auto; text-align: center;" data-aos="fade-up">
                <h2 style="font-size: 2rem; font-weight: 800; margin-bottom: 30px;" data-i18n="join_us_title">
                    Bergabung Bersama Kami
                </h2>
                
                <div style="display: flex; gap: 20px;">
                    <a href="beranda" class="mlebet" style="flex: 1; justify-content: center; margin-top: 0; background: none; color: var(--primary); border: 2px solid var(--primary); font-weight: bold; border-radius: 50px; padding: 12px 0; text-decoration:none; display:flex; align-items:center;">
                        <i class="fas fa-sign-in-alt" style="margin-right:8px;"></i> <span data-i18n="btn_login">Masuk</span>
                    </a>
                    <a href="upload_public" class="tandur" style="flex: 1; justify-content: center; margin-top: 0; background: none; color: var(--primary); border: 2px solid var(--primary); font-weight: bold; border-radius: 50px; padding: 12px 0; text-decoration:none; display:flex; align-items:center;">
                        <i class="fas fa-cloud-upload-alt" style="margin-right:8px;"></i> <span data-i18n="btn_upload_public">Upload Publik</span>
                    </a>
                </div>
            </div>

            <div class="audience-grid" style="margin-top: 80px;">
    
                <div class="audience-card" data-aos="fade-up" data-aos-delay="100" style="padding: 0; background: transparent; border: none; box-shadow: none;">
                    <div class="about-card-3d" style="width: 100%; height: 100%; min-height: 300px;">
                        <div class="flip-inner">
                            <div class="flip-face flip-front" style="background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%); border: 2px solid var(--primary); border-radius: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08); padding: 30px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                                <div style="font-size: 3rem; margin-bottom: 20px; color: #7385a5;"><i class="fas fa-masks-theater"></i></div>
                                <h4 style="margin-bottom: 15px;" data-i18n="aud_collector">Kolektor & Umum</h4>
                                <p style="font-size: 12px; font-weight: bold; color: var(--text-muted); margin: 0;" data-i18n="aud_collector_desc">Dokumentasi karya & reputasi publik.</p>
                            </div>
                            <div class="flip-face flip-back" style="border-radius: 20px;">
                                <a id="link-wayang-8" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                                <img id="random-wayang-8" class="wayang-bg" src="" alt="Wayang Art">
                                <div id="loader-wayang-8" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                                <div class="meta-glass"><div class="meta-header"><h4 id="name-wayang-8" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-8">00</span></div></div><div class="meta-subtitle"><span id="gol-wayang-8">-</span> ‚Ä¢ <span id="gaya-wayang-8">-</span></div><div class="meta-footer">Powered By Putramas Official</div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="audience-card" data-aos="fade-up" data-aos-delay="200" style="padding: 0; background: transparent; border: none; box-shadow: none;">
                    <div class="about-card-3d" style="width: 100%; height: 100%; min-height: 300px;">
                        <div class="flip-inner">
                            <div class="flip-face flip-front" style="background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%); border: 2px solid var(--primary); border-radius: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08); padding: 30px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                                <div style="font-size: 3rem; margin-bottom: 20px; color: #7385a5;"><i class="fas fa-landmark"></i></div>
                                <h4 style="margin-bottom: 15px;" data-i18n="aud_researcher">Peneliti Budaya</h4>
                                <p style="font-size: 12px; font-weight: bold; color: var(--text-muted); margin: 0;" data-i18n="aud_researcher_desc">Data autentik terverifikasi untuk riset.</p>
                            </div>
                            <div class="flip-face flip-back" style="border-radius: 20px;">
                                <a id="link-wayang-9" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                                <img id="random-wayang-9" class="wayang-bg" src="" alt="Wayang Art">
                                <div id="loader-wayang-9" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                                <div class="meta-glass"><div class="meta-header"><h4 id="name-wayang-9" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-9">00</span></div></div><div class="meta-subtitle"><span id="gol-wayang-9">-</span> ‚Ä¢ <span id="gaya-wayang-9">-</span></div><div class="meta-footer">Powered By Putramas Official</div></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="audience-card" data-aos="fade-up" data-aos-delay="300" style="padding: 0; background: transparent; border: none; box-shadow: none;">
                    <div class="about-card-3d" style="width: 100%; height: 100%; min-height: 300px;">
                        <div class="flip-inner">
                            <div class="flip-face flip-front" style="background: linear-gradient(135deg, #ffffff 0%, #e3e7ed 90%); border: 2px solid var(--primary); border-radius: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08); padding: 30px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
                                <div style="font-size: 3rem; margin-bottom: 20px; color: #7385a5;"><i class="fas fa-globe-asia"></i></div>
                                <h4 style="margin-bottom: 15px;" data-i18n="aud_web3">Web3 Community</h4>
                                <p style="font-size: 12px; font-weight: bold; color: var(--text-muted); margin: 0;" data-i18n="aud_web3_desc">Koleksi aset budaya nyata & bernilai.</p>
                            </div>
                            <div class="flip-face flip-back" style="border-radius: 20px;">
                                <a id="link-wayang-10" href="#" target="_blank" style="position: absolute; inset: 0; z-index: 20;"></a>
                                <img id="random-wayang-10" class="wayang-bg" src="" alt="Wayang Art">
                                <div id="loader-wayang-10" class="custom-loader"><i class="fas fa-dharmachakra fa-spin"></i></div>
                                <div class="meta-glass"><div class="meta-header"><h4 id="name-wayang-10" class="meta-title">Memuat...</h4><div class="meta-badge">#<span id="id-wayang-10">00</span></div></div><div class="meta-subtitle"><span id="gol-wayang-10">-</span> ‚Ä¢ <span id="gaya-wayang-10">-</span></div><div class="meta-footer">Powered By Putramas Official</div></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container footer-content">
            <div class="footer-logo">Wayang Nusantara</div>
            <p class="footer-tagline"> On-Chain Forever</p>
            
            <div class="socials">
                <a href="https://youtube.com/@PutramasOfficial" class="social-btn"><i class="fab fa-youtube"></i></a>
                <a href="https://instagram.com/putramas_official" class="social-btn"><i class="fab fa-instagram"></i></a>
                <a href="https://facebook.com/PutramasOfficialStudio" class="social-btn"><i class="fab fa-facebook"></i></a>
                <a href="https://opensea.io/collection/putramas-nusantara-shadows-archive" class="social-btn"><i class="fa fa-shopping-cart"></i></a>
            </div>

            <p class="copyright">&copy; <span id="year"></span> <strong>Powered By Putramas Official.</strong> All Rights Reserved.</p>
        </div>
    </footer>

    <script>
    AOS.init({ duration: 800, once: true });

    // --- CONFIG ---
    const CONTRACT_ADDRESS = "0x72359F776Ac4B44c6c79dBF805D79959515E0c58";
    const ALCHEMY_KEY = '9WNWGMuDgG3vg8xYOM7xs'; // Key dari screenshot Anda
    const ALCHEMY_RPC = `https://base-mainnet.g.alchemy.com/v2/${ALCHEMY_KEY}`;
    const PUBLIC_RPC = "https://mainnet.base.org"; // Fallback

    const ABI = [{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"FeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"address","name":"user","type":"address"}],"name":"Liked","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint8","name":"star","type":"uint8"},{"indexed":false,"internalType":"string","name":"ulasan","type":"string"}],"name":"Reviewed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"RevisionFeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"string","name":"message","type":"string"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"TipSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"string","name":"nama","type":"string"},{"indexed":false,"internalType":"string","name":"golongan","type":"string"},{"indexed":false,"internalType":"bool","name":"isOfficial","type":"bool"},{"indexed":false,"internalType":"address","name":"creator","type":"address"}],"name":"WayangLahir","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"string","name":"namaBaru","type":"string"},{"indexed":false,"internalType":"string","name":"uriBaru","type":"string"}],"name":"WayangUpdate","type":"event"},{"inputs":[],"name":"MAX_TIP","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_TIP","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_penerima","type":"address"},{"internalType":"string","name":"_tokenURI","type":"string"},{"internalType":"string","name":"_nama","type":"string"},{"internalType":"string","name":"_golongan","type":"string"},{"internalType":"string","name":"_gaya","type":"string"}],"name":"arsipWayang","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"dalang","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"emergencyWithdrawETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getAverageRating","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"golongan","type":"string"}],"name":"getIdsByGolongan","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getInfoWayang","outputs":[{"components":[{"internalType":"string","name":"nama","type":"string"},{"internalType":"string","name":"golongan","type":"string"},{"internalType":"string","name":"gaya","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"bool","name":"isActive","type":"bool"},{"internalType":"bool","name":"isOfficial","type":"bool"},{"internalType":"address","name":"creator","type":"address"}],"internalType":"struct WayangArsipPutramas.WayangInfo","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getReviews","outputs":[{"components":[{"internalType":"address","name":"reviewer","type":"address"},{"internalType":"uint8","name":"bintang","type":"uint8"},{"internalType":"string","name":"ulasan","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct WayangArsipPutramas.Review[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getTipByIndex","outputs":[{"components":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"string","name":"message","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct WayangArsipPutramas.TipRecord","name":"","type":"tuple"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"user","type":"address"}],"name":"getTipCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getTipTotalBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"}],"name":"hasLiked","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"}],"name":"hasReviewed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"kasihLike","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint8","name":"_bintang","type":"uint8"},{"internalType":"string","name":"_ulasanPilihan","type":"string"}],"name":"kasihUlasan","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"publicMintFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"string","name":"_namaBaru","type":"string"},{"internalType":"string","name":"_uriBaru","type":"string"}],"name":"revisiDataWayang","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_id","type":"uint256"},{"internalType":"string","name":"_namaBaru","type":"string"},{"internalType":"string","name":"_uriBaru","type":"string"}],"name":"revisiWayang","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"revisionFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address payable","name":"_receiver","type":"address"},{"internalType":"string","name":"_message","type":"string"}],"name":"sendTip","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_newFee","type":"uint256"}],"name":"setMintFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_newFee","type":"uint256"}],"name":"setRevisionFee","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"totalLikes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"totalReceived","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalTipsGrand","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_tokenURI","type":"string"},{"internalType":"string","name":"_nama","type":"string"},{"internalType":"string","name":"_golongan","type":"string"},{"internalType":"string","name":"_gaya","type":"string"}],"name":"uploadPublik","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"walletOfOwner","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"wayangRegistry","outputs":[{"internalType":"string","name":"nama","type":"string"},{"internalType":"string","name":"golongan","type":"string"},{"internalType":"string","name":"gaya","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"},{"internalType":"bool","name":"isActive","type":"bool"},{"internalType":"bool","name":"isOfficial","type":"bool"},{"internalType":"address","name":"creator","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"wayangReviews","outputs":[{"internalType":"address","name":"reviewer","type":"address"},{"internalType":"uint8","name":"bintang","type":"uint8"},{"internalType":"string","name":"ulasan","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"stateMutability":"view","type":"function"}];

    const listGolongan = ["Satria", "Dewa", "Yaksa", "Wanara", "Panakawan", "Kayon", "Bambangan", "Punggawa", "Krodan", "Resi", "Putren", "Buta Kiwe", "Sato", "Gaman"];
    
    // Variabel Global
    let provider, contract;
    let foundIds = []; 
    const CACHE_KEY = 'putramas_data_cache';
    const CACHE_EXPIRY = 5 * 60 * 1000; // 5 menit
    const MY_GATEWAY = "https://magenta-secondary-guan-686.mypinata.cloud/ipfs/";
        

    // --- INIT (Jalan Otomatis) ---
    window.onload = async () => {
        try {
            console.log("Starting dashboard init...");
            // 1. Setup Provider dengan Try-Catch per Provider
            let alchemyProvider;
            try {
                alchemyProvider = new ethers.providers.JsonRpcProvider(ALCHEMY_RPC);
                await alchemyProvider.getNetwork(); // Test koneksi
                console.log("Alchemy connected successfully");
            } catch (alchemyError) {
                console.error("Alchemy connection failed:", alchemyError);
                alchemyProvider = null;
            }

            const publicProvider = new ethers.providers.JsonRpcProvider(PUBLIC_RPC);
            provider = alchemyProvider || publicProvider; // Prioritas Alchemy
            contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, provider);
            
            console.log("Connected to Base via", alchemyProvider ? "Alchemy" : "Public RPC");

            // 2. Cek Cache
            const cachedData = getCache();
            if (cachedData) {
                console.log("Loading from cache...");
                renderFromCache(cachedData);
                // Update background jika expired
                setTimeout(async () => {
                    await fetchAndUpdate();
                }, 1000);
                return;
            }

            // 3. Fetch data jika no cache
            console.log("Fetching fresh data...");
            await fetchAndUpdate();

        } catch (e) {
            console.error("Init Error:", e);
            alert("Gagal memuat data dari Blockchain. Coba cek console browser (F12) untuk detail error, atau refresh.");
        } finally {
            document.querySelectorAll('.skeleton').forEach(el => el.classList.remove('skeleton'));
        }
    };

async function injectRandomWayangToAbout() {
    console.log("üé≤ Mengisi SEMUA kartu wayang secara otomatis...");

    if (!foundIds || foundIds.length === 0) {
        setTimeout(injectRandomWayangToAbout, 2000); 
        return;
    }

    // FUNGSI HELPER: Ambil ID Acak
    const getRandomId = () => foundIds[Math.floor(Math.random() * foundIds.length)];

    // 1. Cari SEMUA gambar wayang di halaman (yang ID-nya dimulai 'random-wayang-')
    // Ini akan menemukan: random-wayang-1, random-wayang-2, random-wayang-3, dst...
    const allWayangCards = document.querySelectorAll('[id^="random-wayang-"]');

    // 2. Loop (Ulangi) untuk setiap kartu yang ditemukan
    allWayangCards.forEach(imgEl => {
        // Ambil ID elemennya (misal: "random-wayang-5")
        const elementID = imgEl.id;
        
        // Ambil data wayang acak dari blockchain
        const randomTokenId = getRandomId();
        
        // Eksekusi worker untuk mengisi kartu tersebut
        fetchAndDisplayWayang(randomTokenId, elementID);
    });
}

// --- FUNGSI WORKER (DATA + CUSTOM FA LOADER) ---
async function fetchAndDisplayWayang(id, imgId, labelId) {
    // Detect suffix ID (1 atau 2)
    const idSuffix = imgId.split('-')[2]; 
    
    const els = {
        img: document.getElementById(imgId),
        loader: document.getElementById(`loader-wayang-${idSuffix}`), // Ambil elemen loader
        link: document.getElementById(`link-wayang-${idSuffix}`),
        id: document.getElementById(`id-wayang-${idSuffix}`),
        name: document.getElementById(`name-wayang-${idSuffix}`),
        gol: document.getElementById(`gol-wayang-${idSuffix}`),
        gaya: document.getElementById(`gaya-wayang-${idSuffix}`)
    };

    if (!els.img) return;

    // A. RESET STATE (Tampilkan Loader FA, Sembunyikan Gambar)
    if(els.id) els.id.innerText = id;

    if(els.link) {
        els.link.href = `detail?id=${id}`; // Link menuju halaman detail
    }
    
    // Tampilkan Loader FA
    if(els.loader) els.loader.classList.add('active');
    
    // Sembunyikan Gambar Dulu (Biar transisi smooth)
    els.img.style.opacity = "0"; 
    
    // HAPUS BARIS INI (Kita tidak pakai loader GIF lagi)
    // els.img.src = "https://cdnjs.cloudflare.com/.../loader.gif"; 

    try {
        const reader = (typeof contractReader !== 'undefined') ? contractReader : contract;
        
        // B. FETCH DATA
        const [registryData, uri] = await Promise.all([
            reader.wayangRegistry(id),
            reader.tokenURI(id)
        ]);

        // Update Teks Metadata
        if(registryData) {
            if(els.name) els.name.innerText = registryData[0];
            if(els.gol) els.gol.innerText = registryData[1];
            if(els.gaya) els.gaya.innerText = registryData[2];
        }

        // C. PROSES GAMBAR
        if(uri) {
            const metadataUrl = uri.replace("ipfs://", MY_GATEWAY);
            const res = await fetch(metadataUrl);
            const data = await res.json();
            const rawImg = data.image || data.image_url;

            if (rawImg) {
                const pinataImgUrl = rawImg.replace("ipfs://", MY_GATEWAY);
                const optimizedUrl = `https://wsrv.nl/?url=${encodeURIComponent(pinataImgUrl)}&w=300&q=75&output=webp`;

                const tempImg = new Image();
                tempImg.src = optimizedUrl;
                
                // SAAT GAMBAR SIAP
                tempImg.onload = () => {
                    els.img.src = optimizedUrl;
                    els.img.style.opacity = "1"; // Munculkan Gambar
                    if(els.loader) els.loader.classList.remove('active'); // Matikan Loader FA
                    
                    if (typeof GLOBAL_IMG_CACHE !== 'undefined') GLOBAL_IMG_CACHE[id] = optimizedUrl;
                };
                
                // SAAT ERROR (Fallback)
                tempImg.onerror = () => {
                    els.img.src = pinataImgUrl;
                    els.img.style.opacity = "1";
                    if(els.loader) els.loader.classList.remove('active');
                };
            }
        }

    } catch (error) {
        console.warn(`Gagal fetch ID ${id}:`, error);
        // Fallback Error
        els.img.src = `https://via.placeholder.com/400x400/2c3e50/ffffff?text=Error`;
        els.img.style.opacity = "1";
        if(els.loader) els.loader.classList.remove('active'); // Matikan loader walau error
    }
}
    
    // Fungsi Cache
    function getCache() {
        const cached = localStorage.getItem(CACHE_KEY);
        if (!cached) return null;
        const { data, timestamp } = JSON.parse(cached);
        if (Date.now() - timestamp > CACHE_EXPIRY) return null;
        return data;
    }

    function setCache(data) {
        localStorage.setItem(CACHE_KEY, JSON.stringify({ data, timestamp: Date.now() }));
    }

    function renderFromCache(cached) {
        console.log("Rendering from cache data...");
        // Render UI dari cache
        document.getElementById("val-supply").innerText = cached.total;
        document.getElementById("val-fee").innerText = cached.fee + " ETH";
        document.getElementById("val-tips").innerText = cached.tips + " ETH";
        document.getElementById("val-ratio").innerText = cached.ratio + "%";

        renderDoughnut("chartGolongan", listGolongan, cached.golData);
        renderPolar("chartGaya", cached.gayaLabels, cached.gayaVals);
    }

        async function fetchAndUpdate() {
        updateProgress(0);

        // 1. Ambil Data Utama (Wajib ditunggu/await karena mau masuk cache)
        const stats = await loadGlobalStats();  
        updateProgress(50);

        // 2. Ambil Data Detail (Wajib ditunggu/await karena mau masuk cache)
        const deep = await loadDeepDetails(); 
        
        // 3. Ambil Activity Feed (JANGAN pakai await)
        // Biarkan dia jalan sendiri di background agar tidak menunda render grafik utama
        loadActivity(); 

        updateProgress(100);

        // 4. Siapkan Data untuk Disimpan
        const cacheData = {
            total: stats.total,
            fee: stats.fee,
            tips: stats.tips,
            golData: stats.golData,
            ratio: deep.ratio,
            gayaLabels: deep.gayaLabels,
            gayaVals: deep.gayaVals
        };

        console.log("Saving new data to cache...");
        setCache(cacheData);
        
        // 5. Render Ulang Grafik Utama
        renderFromCache(cacheData); 
    }

    function updateProgress(percent) {
        document.getElementById('progress-bar').style.width = `${percent}%`;
    }

    // --- LOADERS TANPA MULTICALL ---
    
    async function loadGlobalStats() {
        console.log("Loading global stats...");
        let total = 0;
        let golData = [];
        
        // Fetch Basic
        const fee = ethers.utils.formatEther(await contract.publicMintFee().catch(() => 0));
        const tips = ethers.utils.formatEther(await contract.totalTipsGrand().catch(() => 0));

        // Fetch Golongan Loop
        const promises = listGolongan.map(async (g) => {
            const ids = await contract.getIdsByGolongan(g).catch(() => []);
            return { label: g, count: ids.length, ids: ids };
        });

        const results = await Promise.all(promises);
        
        results.forEach(res => {
            total += res.count;
            golData.push(res.count);
            if(res.ids.length > 0) foundIds.push(...res.ids);
        });

        console.log("Global stats loaded: total =", total);
        return { total, fee, tips, golData };
    }   

    // --- FUNGSI LOAD TOP POPULAR (ANTI-CRASH) ---
    async function loadDeepDetails() {
        console.log("Loading Top Popular List...");
        
        // 1. SAFETY CHECK (PENTING! Agar tidak Fatal Error)
        // Jika foundIds belum ada isinya, kita berhenti dulu, jangan paksa .map()
        if (typeof foundIds === 'undefined' || !foundIds || foundIds.length === 0) {
            console.warn("‚ö†Ô∏è Data ID belum siap, melewati proses statistik detail.");
            // Update UI agar tidak loading selamanya
            const listContainer = document.getElementById("top-wayang-list");
            if(listContainer) listContainer.innerHTML = '<div style="text-align:center; color:#aaa; padding:20px;">Menunggu data...</div>';
            return { ratio: "0", gayaLabels: [], gayaVals: [] };
        }

        let gayaCounts = {}; 
        let officialCount = 0;
        let totalLikesGlobal = 0;

        // 2. Fetch Data (Dengan Limitasi Batch Sederhana)
        // Kita gunakan try-catch di dalam map agar satu error tidak mematikan semua
        const fetchPromises = foundIds.map(async (id) => {
            try {
                // Gunakan contractReader jika ada (lebih stabil), jika tidak pakai contract biasa
                const reader = (typeof contractReader !== 'undefined') ? contractReader : contract;

                const [data, likesBn] = await Promise.all([
                    reader.wayangRegistry(id),
                    reader.totalLikes(id).catch(() => ethers.BigNumber.from(0))
                ]);
                
                return {
                    id: id,
                    nama: data[0],
                    golongan: data[1],
                    gaya: data[2], 
                    isOff: data[5],
                    likes: likesBn.toNumber()
                };
            } catch (err) { 
                return null; // Jika gagal, return null (jangan crash)
            }
        });

        const details = await Promise.all(fetchPromises);
        
        // 3. Filter Data Valid
        const validDetails = details.filter(d => d !== null);

        // 4. Hitung Statistik
        validDetails.forEach(d => {
            gayaCounts[d.gaya] = (gayaCounts[d.gaya] || 0) + 1;
            if(d.isOff) officialCount++;
            totalLikesGlobal += d.likes;
        });

        // 5. SORTING & RENDER
        const sortedByLikes = [...validDetails].sort((a, b) => b.likes - a.likes).slice(0, 20);
        const listContainer = document.getElementById("top-wayang-list");
        
        if (!listContainer) return { ratio: "0", gayaLabels: [], gayaVals: [] }; // Safety check elemen

        if (validDetails.length === 0) {
            listContainer.innerHTML = '<div style="text-align:center; color:#aaa; margin-top:20px;">Belum ada data wayang.</div>';
        } else {
            let listHtml = '<ul style="list-style: none; padding: 0; margin: 0;">';
            
            sortedByLikes.forEach((item, index) => {
                // Warna Ranking
                let rankColor = "#64748b"; 
                let iconRank = "";
                if(index === 0) { rankColor = "#fbc02d"; iconRank = '<i class="fas fa-trophy" style="color:#fbc02d; filter: drop-shadow(0 2px 4px rgba(251,192,45,0.5));"></i>'; }
                else if(index === 1) { rankColor = "#b36a1a"; iconRank = '<i class="fas fa-medal" style="color:#b36a1a; filter: drop-shadow(0 2px 4px rgba(179,106,26,0.45));"></i>';}
                else if(index === 2) { rankColor = "#ef6c00"; iconRank = '<i class="fas fa-award" style="color:#ef6c00; filter: drop-shadow(0 3px 6px rgba(239,108,0,0.55));"></i>'; }

                // ID Unik untuk thumbnail
                const thumbId = `thumb-rank-${item.id}`;

                listHtml += `
<li style="margin-bottom: 10px;">
    <a href="detail?id=${item.id}" target="_blank" style="text-decoration: none; color: inherit;">
        <div class="popular-item">
            
            <div style="font-weight: 800; font-size: 1rem; color: ${rankColor}; width: 30px; text-align:center; flex-shrink: 0;">
                ${index + 1}
            </div>
            
            <div class="thumb-wrapper" style="width: 45px; height: 45px; min-width: 45px; border-radius: 8px; overflow: hidden; border: 1px solid #eee; background: #f9f9f9; flex-shrink: 0;">
                <img id="${thumbId}" 
                     src="https://via.placeholder.com/50?text=..." 
                     alt="${item.nama}" 
                     class="wayang-thumb"
                     style="width: 100%; height: 100%; object-fit: cover; display: block;"
                     onerror="this.src='https://via.placeholder.com/50?text=Err'">
            </div>
            
            <div style="flex: 1; min-width: 0; padding-left: 10px;">
                <div style="font-size: 0.9rem; font-weight: 700; color: var(--text-main); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                    ${item.nama} ${iconRank}
                </div>
                <div style="font-size: 0.75rem; color: var(--text-muted);">
                    ${item.golongan} ‚Ä¢ ID #${item.id}
                </div>
            </div>
            
            <div style="display: flex; justify-content: space-between; align-items: center; background: #e6f7e8; padding: 6px 12px; border-radius: 12px; flex-shrink: 0; gap: 15px; border: 1px solid #80d98c;">
                <span style="font-size: 0.75rem; color: #7385a5; font-weight: 600; letter-spacing: 0.5px; opacity: 0.8;">
                    ${getTrans('popularity_label')} ${item.nama}
                </span>

                <div style="font-size: 0.95rem; font-weight: 900; color: #ff3f29; display: flex; align-items: center; gap: 5px;">
                    <i class="fas fa-heart" style="filter: drop-shadow(0 2px 4px rgba(0, 90, 12, 0.35));"></i> ${item.likes}
                </div>
            </div>
        </div>
    </a>
</li>
`;
                
                // Panggil Lazy Load Gambar (Delay sedikit agar tidak memberatkan)
                setTimeout(() => fetchThumbnail(item.id, thumbId), 500 + (index * 200));
            });
            listHtml += '</ul>';
            listContainer.innerHTML = listHtml;
        }

        // Update Total Global di Header
        if(document.getElementById("val-total-likes")) {
            document.getElementById("val-total-likes").innerText = totalLikesGlobal;
        }

        const ratio = foundIds.length > 0 ? ((officialCount / foundIds.length) * 100).toFixed(1) : "0";
        const gayaLabels = Object.keys(gayaCounts);
        const gayaVals = Object.values(gayaCounts);

        return { ratio, gayaLabels, gayaVals };
    }

    // --- FUNGSI FETCH THUMBNAIL (DIPERBAIKI) ---
    async function fetchThumbnail(id, elementId) {
        try {
            // Gunakan reader agar tidak perlu wallet connect
            const reader = (typeof contractReader !== 'undefined') ? contractReader : contract;
            
            const uri = await reader.tokenURI(id);
            if(!uri) return;

            // Resolve Gateway
            const metadataUrl = uri.replace("ipfs://", "https://ipfs.io/ipfs/");
            
            const response = await fetch(metadataUrl);
            if(!response.ok) return; // Jika gagal fetch, diam saja (pakai placeholder)

            const metadata = await response.json();
            
            let rawImg = metadata.image || metadata.image_url;
            if(!rawImg) return;

            // Optimasi Gambar (WSRV)
            const cleanImgUrl = rawImg.replace("ipfs://", "https://ipfs.io/ipfs/");
            const optimizedUrl = `https://wsrv.nl/?url=${encodeURIComponent(cleanImgUrl)}&w=100&q=75&output=webp`;

            const imgEl = document.getElementById(elementId);
            if(imgEl) {
                imgEl.src = optimizedUrl;
            }
        } catch (e) {
            // Silent catch (jangan bikin fatal error)
            // console.warn(`Gagal load thumbnail ID ${id}`); 
        }
    }
    
    // --- CHARTS CONFIG ---
Chart.defaults.font.family = "'Plus Jakarta Sans', sans-serif";
Chart.defaults.color = '#64748b';

function renderDoughnut(id, lbl, dat) {
    const canvasElement = document.getElementById(id);
    
    // Safety check: Pastikan elemen canvas ada
    if (!canvasElement) return;

    // --- PERBAIKAN UTAMA: HANCURKAN CHART LAMA ---
    // Chart.getChart() mengambil instance chart yang nempel di canvas ini
    const existingChart = Chart.getChart(canvasElement);
    if (existingChart) {
        existingChart.destroy(); // Hapus bersih chart lama
    }
    // ---------------------------------------------

    // Baru gambar chart baru
    new Chart(canvasElement, {
        type: 'doughnut',
        data: { 
            labels: lbl, 
            datasets: [{ 
                data: dat, 
                backgroundColor: ['#7385a5', '#889bbd', '#9db1d5', '#b2c7ed', '#c7ddff', '#5c6a84', '#a6b4cd'], 
                borderWidth: 0 
            }] 
        },
        options: { 
            maintainAspectRatio: false, 
            plugins: { 
                legend: { display: false },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return ' ' + context.label + ': ' + context.raw;
                        }
                    }
                }
            } 
        }
    });
}

    function renderPolar(id, lbl, dat) {
        new Chart(document.getElementById(id), {
            type: 'polarArea',
            data: { labels: lbl, datasets: [{ data: dat, backgroundColor: ['rgba(115,133,165,0.8)', 'rgba(197,160,89,0.8)', 'rgba(30,41,59,0.7)', 'rgba(226,232,240,0.9)'], borderWidth:2, borderColor:'#fff' }] },
            options: { maintainAspectRatio: false, scales: { r: { ticks: { display: false }, grid: { display: false } } }, plugins: { legend: { position:'right', labels: { boxWidth:10, usePointStyle:true } } } }
        });
    }
        
        // --- 1. METODE KULKAS (Hybrid: Cache First -> Lazy Load IPFS) ---
    async function loadRecentMintsFromStorage() {
        console.log("Membuka Kulkas: Mengambil data minting terbaru...");
        const feedContainer = document.getElementById('activity-feed');
        
        // Cek apakah data ID tersedia
        if (!foundIds || foundIds.length === 0) {
            feedContainer.innerHTML = '<div style="text-align:center; padding:20px; color:#aaa;">Belum ada data wayang.</div>';
            return;
        }

        // Ambil 5 ID terbaru (Urutan ID terbesar ke terkecil)
        const sortedIds = foundIds.sort((a, b) => b - a).slice(0, 5);

        let html = '<ul style="list-style: none; padding: 0; margin: 0;">';

        for (let id of sortedIds) {
            try {
                // Ambil data on-chain (Nama & Golongan) - Ini cepat karena text
                const data = await contract.wayangRegistry(id);
                const nama = data[0];
                const gol = data[1];

                // --- LOGIKA HYBRID IMAGE ---
                // 1. Cek Cache Dulu
                let imgSrc = localStorage.getItem(`img_v6_${id}`);
                let imgId = `mint-img-${id}`; // ID unik untuk elemen gambar ini
                let needsFetch = false;

                // 2. Jika Cache Kosong, pakai Placeholder & tandai untuk fetch
                if (!imgSrc) {
                    imgSrc = "https://via.placeholder.com/100x100/e0e0e0/888888?text=Loading"; 
                    needsFetch = true;
                }

                // Render HTML
                html += `
<li style="padding: 12px 0; border-bottom: 1px solid #f0f0f0; display: flex; align-items: center; gap: 12px;">
    
    <div style="width: 45px; height: 45px; border-radius: 8px; overflow: hidden; flex-shrink: 0; border: 1px solid #eee; background: #f9f9f9; position: relative;">
        <img id="${imgId}" src="${imgSrc}" alt="${nama}" 
             style="width: 100%; height: 100%; object-fit: cover; transition: opacity 0.5s;" 
             onerror="this.src='https://via.placeholder.com/45?text=?'">
    </div>

    <div style="flex: 1;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2px;">
            <div style="font-size: 0.9rem; font-weight: 600; color: #2c3e50;">
                ${getTrans('new_wayang_born')}
            </div>
            
            <div style="background: #e3f2fd; color: #1565c0; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.7rem;">
                <i class="fas fa-magic"></i>
            </div>
        </div>

        <div style="font-size: 0.8rem; color: #666; line-height: 1.3;">
            <strong>${nama}</strong> <span style="color:#666;">(${gol})</span><br>
            <a href="detail?id=${id}" target="_blank" style="text-decoration: none;">
                <span style="font-size:0.75rem; font-weight: bold; color: var(--primary); cursor: pointer; transition: 0.2s;">
                    ID #${id}  ${getTrans('verified_status')} <i class="fas fa-external-link-alt" style="font-size: 0.65rem; font-weight: bold;"></i>
                </span>
            </a>
        </div>
    </div>
</li>`;

                // 3. JIKA PERLU FETCH (Lazy Load)
                // Jalankan di background setelah 100ms agar UI tidak macet
                if (needsFetch) {
                    setTimeout(() => fetchMintImage(id, imgId), 100 + (id % 5) * 200); 
                }

            } catch (err) { console.warn("Skip ID", id); }
        }

        html += '</ul>';
        
        // Render ke Layar
        if(!document.getElementById('mint-feed')) {
            feedContainer.innerHTML = '<div id="live-feed"></div><div id="mint-feed"></div>';
        }
        document.getElementById('mint-feed').innerHTML = html;
    }

    // --- FUNGSI PENGAMBIL GAMBAR (BACKGROUND WORKER) ---
    async function fetchMintImage(id, elementId) {
        try {
            // 1. Tanya Blockchain: "Mana link metadatanya?"
            const uri = await contract.tokenURI(id);
            
            // 2. Convert IPFS ke Gateway HTTP (Biar browser bisa baca)
            const metadataUrl = uri.replace("ipfs://", "https://ipfs.io/ipfs/");
            
            // 3. Ambil Metadata JSON
            const res = await fetch(metadataUrl);
            const data = await res.json();
            
            // 4. Ambil Link Gambar Asli
            let rawImg = data.image || data.image_url;
            if(!rawImg) return;

            // 5. Optimasi Gambar (Pakai WSRV supaya ringan & format WebP)
            const publicUrl = rawImg.replace("ipfs://", "https://ipfs.io/ipfs/");
            const optimizedUrl = `https://wsrv.nl/?url=${encodeURIComponent(publicUrl)}&w=100&q=75&output=webp`;

            // 6. UPDATE TAMPILAN (Ganti Placeholder dengan Gambar Asli)
            const imgEl = document.getElementById(elementId);
            if(imgEl) {
                imgEl.src = optimizedUrl;
                
                // 7. SIMPAN KE KULKAS (CACHE)
                // Supaya besok tidak perlu download lagi
                if (typeof GLOBAL_IMG_CACHE !== 'undefined') GLOBAL_IMG_CACHE[id] = optimizedUrl;
                localStorage.setItem(`img_v6_${id}`, optimizedUrl);
            }
        } catch (e) {
            console.warn(`Gagal fetch gambar ID ${id}`);
        }
    }
        

    // --- FUNGSI FETCH UTAMA (FIXED & ROBUST) ---
async function fetchAndUpdate() {
    console.log("üöÄ Memulai Update Data Dashboard...");
    updateProgress(10);
    
    try {
        // 1. Ambil Data Global & ID (Wajib)
        // Fungsi ini mengisi variabel 'foundIds'
        const stats = await loadGlobalStats();  
        updateProgress(30);

        // --- UPDATE 1: PINDAHKAN GAMBAR KE SINI ---
        // Panggil gambar SEGERA setelah kita punya ID.
        // Jadi kalaupun Chart di bawah error, gambar di kartu About TETAP MUNCUL.
        if (typeof injectRandomWayangToAbout === 'function') {
            injectRandomWayangToAbout();
        }
        // ------------------------------------------

        // 2. Metode Kulkas (Recent Mints)
        if (typeof loadRecentMintsFromStorage === 'function') {
            await loadRecentMintsFromStorage(); 
        } else {
            console.warn("‚ö†Ô∏è Fungsi loadRecentMintsFromStorage tidak ditemukan.");
        }
        updateProgress(50);
        
        // 3. Aktifkan Satpam (Live Listener)
        if (typeof setupLiveListeners === 'function') {
            setupLiveListeners();
        }
        updateProgress(60);

        // 4. Ambil Detail & Render Grafik (Bungkus Try-Catch Sendiri)
        try {
            const deep = await loadDeepDetails(); 
            updateProgress(90);

            // Cache Logic
            const cacheData = {
                total: stats.total,
                fee: stats.fee,
                tips: stats.tips,
                golData: stats.golData,
                ratio: deep.ratio,
                gayaLabels: deep.gayaLabels,
                gayaVals: deep.gayaVals
            };
            
            console.log("üíæ Menyimpan data terbaru ke Cache Browser...");
            setCache(cacheData);
            renderFromCache(cacheData); // Ini memanggil renderDoughnut
            
        } catch (chartError) {
            console.warn("‚ö†Ô∏è Gagal render grafik (Data utama aman):", chartError);
            // Jangan throw error, biarkan lanjut ke finish
        }

        // --- FINISHING (SUKSES) ---
        updateProgress(100);
        console.log("‚úÖ Dashboard berhasil diperbarui!");

        // Toast Sukses di sini (Bukan di catch)
        if(typeof showToast === 'function') {
            showToast("Jaringan Terhubung. Selamat Menjelajah.", 'success', 2000);
        }

    } catch (fatalError) {
        // --- HANDLING FATAL ERROR ---
        console.error("‚ùå Fatal Error di fetchAndUpdate:", fatalError);
        updateProgress(100);
        
        // Toast Error/Warning
        if(typeof showToast === 'function') {
            showToast("Koneksi lambat, data tidak lengkap.", 'warning', 3000);
        }
    }
}
            
        </script>

    <script>
    // 1. Inisialisasi AOS (Animasi Scroll)
    // Bisa ditaruh di luar karena AOS biasanya punya mekanisme tunggu sendiri,
    // tapi aman juga ditaruh di dalam.
    AOS.init({ once: true, offset: 100, duration: 800 });

    // 2. Event Listener Utama (Menunggu HTML selesai dimuat)
    document.addEventListener("DOMContentLoaded", () => {
        
        // --- A. Navbar Scroll Effect ---
        const nav = document.getElementById('navbar');
        if (nav) { // Cek dulu nav ada atau tidak untuk menghindari error
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    nav.classList.add('scrolled');
                } else {
                    nav.classList.remove('scrolled');
                }
            });
        }

    // --- B. Efek Supernova pada Kartu 3D ---
    const cards = document.querySelectorAll('.about-card-3d');
    
    cards.forEach(card => {
        // Gunakan 'mousedown' atau 'pointerdown' untuk respon instan (lebih cepat dari click)
        card.addEventListener('pointerdown', function(e) {
            const targetBack = this.querySelector('.flip-back');
            if (!targetBack) return;

            // Buat elemen
            const burst = document.createElement('div');
            burst.classList.add('supernova-burst');
            
            // Tentukan posisi ledakan sesuai titik sentuh (Opsional, tapi keren)
            // Atau biarkan default (tengah) sesuai CSS jika mau simpel.
            // Di sini kita pakai default tengah sesuai CSS Anda.

            targetBack.appendChild(burst);

            // Hapus elemen
            setTimeout(() => {
                burst.remove();
            }, 600); // Sesuaikan dengan durasi animasi CSS (0.6s)
        });
    });

        // --- C. Tahun Copyright ---
        const yearSpan = document.getElementById("year");
        if (yearSpan) {
            yearSpan.textContent = new Date().getFullYear();
        }
    });
    </script>

    <script>
    // --- 1. KAMUS BAHASA (LENGKAP) ---
    const translations = {
        // --- BAHASA INDONESIA ---
        id: {
            nav_about: "Tentang", nav_features: "Fitur", nav_archive: "Arsip", nav_vision: "Visi", btn_login: "Masuk",
            hero_subtitle: "Shadows Archive",
            hero_desc: "Arsip digital wayang berbasis blockchain yang Immutable, terverifikasi, terbuka, dan transparan.",
            btn_view_archive: "Lihat Arsip Wayang", btn_upload_public: "Upload Publik",
            tech_erc: "Kompatibel ERC-721", tech_meta: "Metadata On-Chain", tech_imm: "Rekor Kekal", tech_p2p: "Ekonomi P2P",
            
            card_preservation_title: "Preservasi Digital",
            card_preservation_desc: "Teknologi Blockchain memastikan setiap data budaya tercatat permanen tanpa risiko manipulasi.",
            card_gallery_title: "Arsip Digital Galeri",
            card_gallery_desc: "Platform arsip digital galeri, yang tersimpan Immutable dan terverifikasi lintas generasi.",
            
            feature_title: "Fitur Ekosistem", feature_subtitle: "Kombinasi seni tradisional dengan transparansi Web3.",
            feat_official_title: "Arsip Resmi (Official)", feat_official_desc: "Wayang yang diarsipkan langsung koleksi milik Official dengan metadata lengkap.",
            verif_onchain: "Verifikasi On-Chain", meta_visual: "Metadata Visual & Gaya",
            feat_community_title: "Upload Komunitas", feat_community_desc: "Platform terbuka bagi kolektor & publik untuk mendokumentasikan karya mereka.",
            creator_right: "Hak Cipta Kreator", transparent_id: "Identitas Transparan",
            feat_reputation_title: "Reputasi Sosial", imm_review: "Immutable Review", rating_star: "Rating 1-5 Bintang", anti_bot: "Anti-Bot System",
            feat_support_title: "Dukungan Langsung", feat_support_desc: "Kirim dukungan ETH secara langsung ke Karya atau koleksi, dengan kurasi terbaik.",
            no_cut: "Tanpa Potongan Platform", p2p_instant: "Transaksi P2P Instan",
            feat_secure_title: "Aman & Abadi", dist_archive: "Arsip Terdistribusi", crypto_data: "Data Kriptografis", integrity: "Keaslian Integritas",
            
            public_data_title: "Data Publik Wayang Nusantara",
            stat_total: "Total Wayang", stat_fee: "Biaya Minting", stat_tips: "Total Dukungan", stat_ratio: "Rasio Official",
            chart_gol: "Dominasi Golongan", chart_style: "Dominasi Gagrak",
            
            sec_title: "Data Tidak Bisa Dipalsukan", sec_desc: "Wayang Nusantara adalah platform arsip digital galeri terdesentralisasi pertama di Indonesia.",
            sec_auth: "Autentik", sec_auth_desc: "Tanda tangan digital kreator.",
            sec_decent: "Terdesentralisasi", sec_decent_desc: "Tidak ada server pusat tunggal.",
            sec_time: "Timestamp", sec_time_desc: "Bukti waktu upload akurat.",
            
            join_us_title: "Bergabung Bersama Kami",
            aud_collector: "Kolektor & Umum", aud_collector_desc: "Dokumentasi karya & reputasi publik.",
            aud_researcher: "Peneliti Budaya", aud_researcher_desc: "Data autentik terverifikasi untuk riset.",
            aud_web3: "Web3 Community", aud_web3_desc: "Koleksi aset budaya nyata & bernilai.",

            // --- TEKS DINAMIS (JS) ---
            activity_global: "Aktivitas Global", 
            activity_popular: "Paling Populer (Top Likes)",
            total_likes_label: "Total Suka Dari Komunitas",
            loading_data: "Memuat data...",
            new_wayang_born: "Wayang Baru Lahir!",
            verified_status: "Verified di Wayang Nusantara",
            popularity_label: "Popularitas"
        },

        // --- BAHASA JAWA (KRAMA INGGIL) ---
        jv: {
            nav_about: "Babagan", nav_features: "Fitur", nav_archive: "Arsip", nav_vision: "Visi", btn_login: "Mlebet",
            hero_subtitle: "Arsip Wewayangan",
            hero_desc: "Arsip digital wayang adhedhasar blockchain ingkang Immutable, kaverifikasi, kabuka, lan transparan.",
            btn_view_archive: "Mirsani Arsip", btn_upload_public: "Unggah Umum",
            tech_erc: "Kompatibel ERC-721", tech_meta: "Metadata On-Chain", tech_imm: "Rekaman Langgeng", tech_p2p: "Ekonomi P2P",
            
            card_preservation_title: "Preservasi Digital",
            card_preservation_desc: "Teknologi Blockchain mesthekake saben data budaya kacathet permanen tanpa risiko manipulasi.",
            card_gallery_title: "Arsip Galeri Digital",
            card_gallery_desc: "Platform arsip galeri digital, ingkang kasimpen Immutable lan kaverifikasi lintas generasi.",
            
            feature_title: "Fitur Ekosistem", feature_subtitle: "Kombinasi seni tradisional kaliyan transparansi Web3.",
            feat_official_title: "Arsip Resmi (Official)", feat_official_desc: "Wayang ingkang diarsipaken langsung saking koleksi Official kanthi metadata jangkep.",
            verif_onchain: "Verifikasi On-Chain", meta_visual: "Metadata Visual & Gaya",
            feat_community_title: "Unggah Komunitas", feat_community_desc: "Platform kabuka kangge kolektor & umum kangge ndokumentasikaken karya.",
            creator_right: "Hak Cipta Kreator", transparent_id: "Identitas Transparan",
            feat_reputation_title: "Reputasi Sosial", imm_review: "Review Langgeng", rating_star: "Biji Bintang 1-5", anti_bot: "Sistem Anti-Bot",
            feat_support_title: "Panyengkuyung Langsung", feat_support_desc: "Kirim dukungan ETH langsung dhateng karya utawi koleksi, kanthi kurasi sae.",
            no_cut: "Tanpa Potongan Platform", p2p_instant: "Transaksi P2P Instan",
            feat_secure_title: "Aman & Langgeng", dist_archive: "Arsip Kasebar", crypto_data: "Data Kriptografis", integrity: "Keaslian Integritas",
            
            public_data_title: "Data Publik Wayang Nusantara",
            stat_total: "Gunggung Wayang", stat_fee: "Bea Minting", stat_tips: "Total Dukungan", stat_ratio: "Rasio Resmi",
            chart_gol: "Dominasi Golongan", chart_style: "Dominasi Gagrak",
            
            sec_title: "Data Mboten Saged Dipalsu", sec_desc: "Wayang Nusantara menika platform arsip galeri digital terdesentralisasi kaping pisan ing Indonesia.",
            sec_auth: "Autentik", sec_auth_desc: "Tanda tangan digital kreator.",
            sec_decent: "Terdesentralisasi", sec_decent_desc: "Mboten wonten server pusat tunggal.",
            sec_time: "Weidal (Timestamp)", sec_time_desc: "Bukti weidal unggah akurat.",
            
            join_us_title: "Gabung Kaliyan Kita",
            aud_collector: "Kolektor & Umum", aud_collector_desc: "Dokumentasi karya & reputasi publik.",
            aud_researcher: "Peneliti Budaya", aud_researcher_desc: "Data autentik kaverifikasi kangge riset.",
            aud_web3: "Komunitas Web3", aud_web3_desc: "Koleksi aset budaya nyata & aji.",

            // --- TEKS DINAMIS (JS) ---
            activity_global: "Aktivitas Global", 
            activity_popular: "Paling Populer (Top Likes)",
            total_likes_label: "Total Suka Saking Warga",
            loading_data: "Muwot data...",
            new_wayang_born: "Wayang Enggal Lair!",
            verified_status: "Kaverifikasi ing Wayang Nusantara",
            popularity_label: "Kajuwaran"
        },

        // --- BAHASA SUNDA (LEMES) ---
        su: {
            nav_about: "Perkawis", nav_features: "Fitur", nav_archive: "Arsip", nav_vision: "Visi", btn_login: "Lebet",
            hero_subtitle: "Arsip Wawayangan",
            hero_desc: "Arsip digital wayang dumasar blockchain anu Immutable, kaverifikasi, kabuka, sareng transparan.",
            btn_view_archive: "Tingali Arsip", btn_upload_public: "Unggah Publik",
            tech_erc: "Kompatibel ERC-721", tech_meta: "Metadata On-Chain", tech_imm: "Rekaman Langgeng", tech_p2p: "Ekonomi P2P",
            
            card_preservation_title: "Preservasi Digital",
            card_preservation_desc: "Teknologi Blockchain mastikeun unggal data budaya kacatet permanen tanpa risiko manipulasi.",
            card_gallery_title: "Arsip Galeri Digital",
            card_gallery_desc: "Platform arsip galeri digital, anu disimpen Immutable tur kaverifikasi lintas generasi.",
            
            feature_title: "Fitur Ekosistem", feature_subtitle: "Kombinasi seni tradisional sareng transparansi Web3.",
            feat_official_title: "Arsip Resmi (Official)", feat_official_desc: "Wayang anu diarsipkeun langsung tina koleksi Official kalayan metadata lengkep.",
            verif_onchain: "Verifikasi On-Chain", meta_visual: "Metadata Visual & Gaya",
            feat_community_title: "Unggah Komunitas", feat_community_desc: "Platform kabuka kanggo kolektor & publik kanggo ngadokumentasikeun karya maran√©hanana.",
            creator_right: "Hak Cipta Kreator", transparent_id: "Identitas Transparan",
            feat_reputation_title: "Reputasi Sosial", imm_review: "Review Langgeng", rating_star: "Rating 1-5 Bintang", anti_bot: "Sistem Anti-Bot",
            feat_support_title: "Pangrojong Langsung", feat_support_desc: "Kirim dukungan ETH sacara langsung kana Karya atanapi koleksi, kalayan kurasi sae.",
            no_cut: "Tanpa Potongan Platform", p2p_instant: "Transaksi P2P Instan",
            feat_secure_title: "Aman & Langgeng", dist_archive: "Arsip Kasebar", crypto_data: "Data Kriptografis", integrity: "Kaaslian Integritas",
            
            public_data_title: "Data Publik Wayang Nusantara",
            stat_total: "Total Wayang", stat_fee: "Biaya Minting", stat_tips: "Total Pangrojong", stat_ratio: "Rasio Resmi",
            chart_gol: "Dominasi Golongan", chart_style: "Dominasi Gagrak",
            
            sec_title: "Data Teu Tiasa Dipalsu", sec_desc: "Wayang Nusantara nya√©ta platform arsip galeri digital terdesentralisasi munggaran di Indon√©sia.",
            sec_auth: "Autentik", sec_auth_desc: "Tanda tangan digital kreator.",
            sec_decent: "Terdesentralisasi", sec_decent_desc: "Teu aya server pusat tunggal.",
            sec_time: "Timestamp", sec_time_desc: "Bukti waktos unggah akurat.",
            
            join_us_title: "Gabung Sareng Kami",
            aud_collector: "Kolektor & Umum", aud_collector_desc: "Dokumentasi karya & reputasi publik.",
            aud_researcher: "Peneliti Budaya", aud_researcher_desc: "Data autentik kaverifikasi kanggo riset.",
            aud_web3: "Komunitas Web3", aud_web3_desc: "Koleksi aset budaya nyata & boga nilai.",

            // --- TEKS DINAMIS (JS) ---
            activity_global: "Aktivitas Global", 
            activity_popular: "Paling Populer (Top Likes)",
            total_likes_label: "Total Suka Ti Balarea",
            loading_data: "Ngamuat data...",
            new_wayang_born: "Wayang Anyar Medal!",
            verified_status: "Kaverifikasi di Wayang Nusantara",
            popularity_label: "Katenaran"
        },

        // --- BAHASA INGGRIS ---
        en: {
            nav_about: "About", nav_features: "Features", nav_archive: "Archive", nav_vision: "Vision", btn_login: "Login",
            hero_subtitle: "Shadows Archive",
            hero_desc: "Blockchain-based digital puppet archive that is Immutable, verified, open, and transparent.",
            btn_view_archive: "View Archive", btn_upload_public: "Public Upload",
            tech_erc: "ERC-721 Compatible", tech_meta: "On-Chain Metadata", tech_imm: "Immutable Records", tech_p2p: "P2P Economy",
            
            card_preservation_title: "Digital Preservation",
            card_preservation_desc: "Blockchain technology ensures every cultural data is recorded permanently without risk of manipulation.",
            card_gallery_title: "Digital Gallery Archive",
            card_gallery_desc: "Digital gallery archive platform, stored Immutably and verified across generations.",
            
            feature_title: "Ecosystem Features", feature_subtitle: "Combining traditional art with Web3 transparency.",
            feat_official_title: "Official Archive", feat_official_desc: "Wayang archived directly by the Official collection with complete metadata.",
            verif_onchain: "On-Chain Verification", meta_visual: "Visual & Style Metadata",
            feat_community_title: "Community Upload", feat_community_desc: "Open platform for collectors & public to document their works.",
            creator_right: "Creator Copyright", transparent_id: "Transparent Identity",
            feat_reputation_title: "Social Reputation", imm_review: "Immutable Review", rating_star: "1-5 Star Rating", anti_bot: "Anti-Bot System",
            feat_support_title: "Direct Support", feat_support_desc: "Send ETH support directly to works or collections, with best curation.",
            no_cut: "No Platform Fees", p2p_instant: "Instant P2P Tx",
            feat_secure_title: "Secure & Eternal", dist_archive: "Distributed Archive", crypto_data: "Cryptographic Data", integrity: "Integrity Authenticity",
            
            public_data_title: "Wayang Nusantara Public Data",
            stat_total: "Total Wayang", stat_fee: "Minting Fee", stat_tips: "Total Support", stat_ratio: "Official Ratio",
            chart_gol: "Class Dominance", chart_style: "Style Dominance",
            
            sec_title: "Data Cannot Be Forged", sec_desc: "Wayang Nusantara is the first decentralized digital gallery archive platform in Indonesia.",
            sec_auth: "Authentic", sec_auth_desc: "Creator digital signature.",
            sec_decent: "Decentralized", sec_decent_desc: "No single central server.",
            sec_time: "Timestamp", sec_time_desc: "Accurate upload time proof.",
            
            join_us_title: "Join Us",
            aud_collector: "Collectors & Public", aud_collector_desc: "Work documentation & public reputation.",
            aud_researcher: "Cultural Researcher", aud_researcher_desc: "Verified authentic data for research.",
            aud_web3: "Web3 Community", aud_web3_desc: "Real & valuable cultural asset collection.",

            // --- TEKS DINAMIS (JS) ---
            activity_global: "Global Activity", 
            activity_popular: "Most Popular (Top Likes)",
            total_likes_label: "Total Community Likes",
            loading_data: "Loading data...",
            new_wayang_born: "New Wayang Minted!",
            verified_status: "Verified on Wayang Nusantara",
            popularity_label: "Popularity of"
        }
    };

    // --- 2. FUNGSI HELPER (PENTING) ---
    // Dipakai oleh Activity Feed & Leaderboard agar bisa ambil bahasa aktif
    function getTrans(key) {
        const lang = localStorage.getItem('selectedLang') || 'id';
        return translations[lang][key] || translations['id'][key] || key;
    }

        // --- 3. LOGIC GANTI BAHASA (CUSTOM DROPDOWN) ---
    
    // Data untuk Tampilan Tombol Dropdown (Bendera & Teks)
    const flagData = {
        id: { 
            text: "ID", 
            svg: '<svg viewBox="0 0 640 480"><path fill="#e11837" d="M0 0h640v240H0z"/><path fill="#fefefe" d="M0 240h640v240H0z"/></svg>' 
        },
        en: { 
            text: "EN", 
            svg: '<svg viewBox="0 0 640 480"><path fill="#012169" d="M0 0h640v480H0z"/><path fill="#FFF" d="M75 0l244 181L562 0h78v62L400 241l240 178v61h-80L320 301 81 480H0v-60l239-178L0 64V0h75z"/><path fill="#C8102E" d="M424 294l216 166v20h-59L345 297v183h-52V294L54 480H0v-23l240-196H0v-46h236L0 23V0h54l238 186V0h52v189L585 0h55v22L424 207h216v45H424v42z"/></svg>' 
        },
        jv: { 
            text: "JW", 
            svg: '<div style="width:100%; height:100%; background:#8d6e63; color:#fff; display:flex; align-items:center; justify-content:center; font-size:10px; border-radius:50%;">Í¶ó</div>' 
        },
        su: { 
            text: "SU", 
            svg: '<div style="width:100%; height:100%; background:#00897b; color:#fff; display:flex; align-items:center; justify-content:center; font-size:10px; border-radius:50%;">·Æû</div>' 
        }
    };

    // Fungsi 1: Update Teks Statis (HTML)
    function changeLanguage(lang) {
        // Update semua elemen dengan atribut data-i18n
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang] && translations[lang][key]) {
                el.innerText = translations[lang][key];
            }
        });
    }

    // Fungsi 2: Toggle Dropdown (Buka/Tutup)
    function toggleDropdown() {
        const dropdown = document.getElementById('custom-lang-dropdown');
        if (dropdown) dropdown.classList.toggle('active');
    }

    // Fungsi 3: Saat Bahasa Dipilih
    function selectLang(lang) {
        // A. Simpan Pilihan ke Memori
        localStorage.setItem('selectedLang', lang);
        
        // B. Refresh Halaman (Agar Grafik & JS Dinamis ter-update)
        location.reload(); 
    }

    // Fungsi 4: Update Tampilan Tombol (Bendera & Teks Terpilih)
    function updateDropdownUI(lang) {
        const currentFlagImg = document.getElementById('current-flag');
        const currentText = document.getElementById('current-lang-text');
        
        if (currentText && flagData[lang]) {
            currentText.innerText = flagData[lang].text;
        }

        // Ganti Icon Bendera
        if (currentFlagImg && flagData[lang]) {
            const iconWrapper = document.createElement('div');
            iconWrapper.innerHTML = flagData[lang].svg;
            
            const newIcon = iconWrapper.firstElementChild;
            newIcon.classList.add('flag-icon');
            newIcon.id = 'current-flag';
            
            currentFlagImg.replaceWith(newIcon);
        }
    }

    // Tutup dropdown jika klik di luar area
    window.onclick = function(event) {
        if (!event.target.closest('.custom-dropdown')) {
            const dropdown = document.getElementById('custom-lang-dropdown');
            if (dropdown) dropdown.classList.remove('active');
        }
    }

    // --- 4. INIT & EVENT LISTENER (VERSI CUSTOM) ---
    document.addEventListener("DOMContentLoaded", () => {
        
        // A. Cek bahasa apa yang tersimpan (Default: ID)
        const savedLang = localStorage.getItem('selectedLang') || 'id';
        
        // B. Terjemahkan Teks Statis (HTML)
        changeLanguage(savedLang);

        // C. Update Tampilan Tombol Dropdown (Bendera & Kode)
        updateDropdownUI(savedLang);
    });
</script>

</body>
</html>
